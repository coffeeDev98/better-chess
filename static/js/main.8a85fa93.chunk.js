(this["webpackJsonpbetter-chess"]=this["webpackJsonpbetter-chess"]||[]).push([[0],{46:function(e,n,t){},47:function(e,n,t){},48:function(e,n,t){"use strict";t.r(n);var r=t(13),o=function(e){var n="b",t="w",o=-1,i="p",a="b",c="k",s="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",u=["1-0","0-1","1/2-1/2","*"],l={b:[16,32,17,15],w:[-16,-32,-17,-15]},f={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},d=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],p=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],b={p:0,n:1,b:2,r:3,q:4,k:5},g={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},h={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},v={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},j={w:[{square:v.a1,flag:h.QSIDE_CASTLE},{square:v.h1,flag:h.KSIDE_CASTLE}],b:[{square:v.a8,flag:h.QSIDE_CASTLE},{square:v.h8,flag:h.KSIDE_CASTLE}]},O=new Array(128),m={w:o,b:o},x=t,y={w:0,b:0},w=o,S=0,E=1,P=[],q={},C={};function k(e){"undefined"===typeof e&&(e=!1),O=new Array(128),m={w:o,b:o},x=t,y={w:0,b:0},w=o,S=0,E=1,P=[],e||(q={}),C={},D(N())}function _(){for(var e=[],n={},t=function(e){e in C&&(n[e]=C[e])};P.length>0;)e.push(Z());for(t(N());e.length>0;)V(e.pop()),t(N());C=n}function A(){R(s)}function R(e,r){"undefined"===typeof r&&(r=!1);var i=e.split(/\s+/),a=i[0],c=0;if(!M(e).valid)return!1;k(r);for(var s=0;s<a.length;s++){var u=a.charAt(s);if("/"===u)c+=8;else if(-1!=="0123456789".indexOf(u))c+=parseInt(u,10);else{var l=u<"a"?t:n;L({type:u.toLowerCase(),color:l},ne(c)),c++}}return x=i[1],i[2].indexOf("K")>-1&&(y.w|=h.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(y.w|=h.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(y.b|=h.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(y.b|=h.QSIDE_CASTLE),w="-"===i[3]?o:v[i[3]],S=parseInt(i[4],10),E=parseInt(i[5],10),D(N()),!0}function M(e){var n="No errors.",t="FEN string must contain six space-delimited fields.",r="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",a="3rd field (castling availability) is invalid.",c="2nd field (side to move) is invalid.",s="1st field (piece positions) does not contain 8 '/'-delimited rows.",u="1st field (piece positions) is invalid [consecutive numbers].",l="1st field (piece positions) is invalid [invalid piece].",f="1st field (piece positions) is invalid [row too large].",d="Illegal en-passant square",p=e.split(/\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:t};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:a};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:c};var b=p[0].split("/");if(8!==b.length)return{valid:!1,error_number:7,error:s};for(var g=0;g<b.length;g++){for(var h=0,v=!1,j=0;j<b[g].length;j++)if(isNaN(b[g][j])){if(!/^[prnbqkPRNBQK]$/.test(b[g][j]))return{valid:!1,error_number:9,error:l};h+=1,v=!1}else{if(v)return{valid:!1,error_number:8,error:u};h+=parseInt(b[g][j],10),v=!0}if(8!==h)return{valid:!1,error_number:10,error:f}}return"3"==p[3][1]&&"w"==p[1]||"6"==p[3][1]&&"b"==p[1]?{valid:!1,error_number:11,error:d}:{valid:!0,error_number:0,error:n}}function N(){for(var e=0,n="",r=v.a8;r<=v.h1;r++){if(null==O[r])e++;else{e>0&&(n+=e,e=0);var i=O[r].color,a=O[r].type;n+=i===t?a.toUpperCase():a.toLowerCase()}r+1&136&&(e>0&&(n+=e),r!==v.h1&&(n+="/"),e=0,r+=8)}var c="";y.w&h.KSIDE_CASTLE&&(c+="K"),y.w&h.QSIDE_CASTLE&&(c+="Q"),y.b&h.KSIDE_CASTLE&&(c+="k"),y.b&h.QSIDE_CASTLE&&(c+="q"),c=c||"-";var s=w===o?"-":ne(w);return[n,x,c,s,S,E].join(" ")}function I(e){for(var n=0;n<e.length;n+=2)"string"===typeof e[n]&&"string"===typeof e[n+1]&&(q[e[n]]=e[n+1]);return q}function D(e){P.length>0||(e!==s?(q.SetUp="1",q.FEN=e):(delete q.SetUp,delete q.FEN))}function T(e){var n=O[v[e]];return n?{type:n.type,color:n.color}:null}function L(e,n){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(n in v))return!1;var t=v[n];return(e.type!=c||m[e.color]==o||m[e.color]==t)&&(O[t]={type:e.type,color:e.color},e.type===c&&(m[e.color]=t),D(N()),!0)}function B(e,n,t,r,o){var a={color:x,from:n,to:t,flags:r,piece:e[n].type};return o&&(a.flags|=h.PROMOTION,a.promotion=o),e[t]?a.captured=e[t].type:r&h.EP_CAPTURE&&(a.captured=i),a}function K(e){function n(e,n,t,r,o){if(e[t].type!==i||0!==Y(r)&&7!==Y(r))n.push(B(e,t,r,o));else for(var c=["q","r",a,"n"],s=0,u=c.length;s<u;s++)n.push(B(e,t,r,o,c[s]))}var t=[],r=x,o=te(r),s={b:1,w:6},u=v.a8,d=v.h1,p=!1,b="undefined"===typeof e||!("legal"in e)||e.legal,g="undefined"===typeof e||!("piece"in e)||"string"!==typeof e.piece||e.piece.toLowerCase();if("undefined"!==typeof e&&"square"in e){if(!(e.square in v))return[];u=d=v[e.square],p=!0}for(var j=u;j<=d;j++)if(136&j)j+=7;else{var S=O[j];if(null!=S&&S.color===r)if(S.type!==i||!0!==g&&g!==i){if(!0===g||g===S.type)for(var E=0,P=f[S.type].length;E<P;E++){var q=f[S.type][E];for(C=j;!(136&(C+=q));){if(null!=O[C]){if(O[C].color===r)break;n(O,t,j,C,h.CAPTURE);break}if(n(O,t,j,C,h.NORMAL),"n"===S.type||"k"===S.type)break}}}else{var C=j+l[r][0];if(null==O[C]){n(O,t,j,C,h.NORMAL);var C=j+l[r][1];s[r]===Y(j)&&null==O[C]&&n(O,t,j,C,h.BIG_PAWN)}for(E=2;E<4;E++){136&(C=j+l[r][E])||(null!=O[C]&&O[C].color===o?n(O,t,j,C,h.CAPTURE):C===w&&n(O,t,j,w,h.EP_CAPTURE))}}}if((!0===g||g===c)&&(!p||d===m[r])){if(y[r]&h.KSIDE_CASTLE){var k=(_=m[r])+2;null!=O[_+1]||null!=O[k]||F(o,m[r])||F(o,_+1)||F(o,k)||n(O,t,m[r],k,h.KSIDE_CASTLE)}if(y[r]&h.QSIDE_CASTLE){var _;k=(_=m[r])-2;null!=O[_-1]||null!=O[_-2]||null!=O[_-3]||F(o,m[r])||F(o,_-1)||F(o,k)||n(O,t,m[r],k,h.QSIDE_CASTLE)}}if(!b)return t;var A=[];for(j=0,P=t.length;j<P;j++)V(t[j]),W(r)||A.push(t[j]),Z();return A}function Q(e,n){var t="";if(e.flags&h.KSIDE_CASTLE)t="O-O";else if(e.flags&h.QSIDE_CASTLE)t="O-O-O";else{if(e.piece!==i){var r=function(e,n){for(var t=e.from,r=e.to,o=e.piece,i=0,a=0,c=0,s=0,u=n.length;s<u;s++){var l=n[s].from,f=n[s].to;o===n[s].piece&&t!==l&&r===f&&(i++,Y(t)===Y(l)&&a++,ee(t)===ee(l)&&c++)}if(i>0)return a>0&&c>0?ne(t):c>0?ne(t).charAt(1):ne(t).charAt(0);return""}(e,n);t+=e.piece.toUpperCase()+r}e.flags&(h.CAPTURE|h.EP_CAPTURE)&&(e.piece===i&&(t+=ne(e.from)[0]),t+="x"),t+=ne(e.to),e.flags&h.PROMOTION&&(t+="="+e.promotion.toUpperCase())}return V(e),$()&&(z()?t+="#":t+="+"),Z(),t}function U(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function F(e,r){for(var o=v.a8;o<=v.h1;o++)if(136&o)o+=7;else if(null!=O[o]&&O[o].color===e){var a=O[o],c=o-r,s=c+119;if(d[s]&1<<b[a.type]){if(a.type===i){if(c>0){if(a.color===t)return!0}else if(a.color===n)return!0;continue}if("n"===a.type||"k"===a.type)return!0;for(var u=p[s],l=o+u,f=!1;l!==r;){if(null!=O[l]){f=!0;break}l+=u}if(!f)return!0}}return!1}function W(e){return F(te(e),m[e])}function $(){return W(x)}function z(){return $()&&0===K().length}function G(){return!$()&&0===K().length}function H(){for(var e={},n=[],t=0,r=0,o=v.a8;o<=v.h1;o++)if(r=(r+1)%2,136&o)o+=7;else{var i=O[o];i&&(e[i.type]=i.type in e?e[i.type]+1:1,i.type===a&&n.push(r),t++)}if(2===t)return!0;if(3===t&&(1===e.b||1===e.n))return!0;if(t===e.b+2){var c=0,s=n.length;for(o=0;o<s;o++)c+=n[o];if(0===c||c===s)return!0}return!1}function J(){for(var e=[],n={},t=!1;;){var r=Z();if(!r)break;e.push(r)}for(;;){var o=N().split(" ").slice(0,4).join(" ");if(n[o]=o in n?n[o]+1:1,n[o]>=3&&(t=!0),!e.length)break;V(e.pop())}return t}function V(e){var t=x,r=te(t);if(function(e){P.push({move:e,kings:{b:m.b,w:m.w},turn:x,castling:{b:y.b,w:y.w},ep_square:w,half_moves:S,move_number:E})}(e),O[e.to]=O[e.from],O[e.from]=null,e.flags&h.EP_CAPTURE&&(x===n?O[e.to-16]=null:O[e.to+16]=null),e.flags&h.PROMOTION&&(O[e.to]={type:e.promotion,color:t}),O[e.to].type===c){if(m[O[e.to].color]=e.to,e.flags&h.KSIDE_CASTLE){var a=e.to-1,s=e.to+1;O[a]=O[s],O[s]=null}else if(e.flags&h.QSIDE_CASTLE){a=e.to+1,s=e.to-2;O[a]=O[s],O[s]=null}y[t]=""}if(y[t])for(var u=0,l=j[t].length;u<l;u++)if(e.from===j[t][u].square&&y[t]&j[t][u].flag){y[t]^=j[t][u].flag;break}if(y[r])for(u=0,l=j[r].length;u<l;u++)if(e.to===j[r][u].square&&y[r]&j[r][u].flag){y[r]^=j[r][u].flag;break}w=e.flags&h.BIG_PAWN?"b"===x?e.to-16:e.to+16:o,e.piece===i||e.flags&(h.CAPTURE|h.EP_CAPTURE)?S=0:S++,x===n&&E++,x=te(x)}function Z(){var e=P.pop();if(null==e)return null;var t=e.move;m=e.kings,x=e.turn,y=e.castling,w=e.ep_square,S=e.half_moves,E=e.move_number;var r,o,a=x,c=te(x);if(O[t.from]=O[t.to],O[t.from].type=t.piece,O[t.to]=null,t.flags&h.CAPTURE)O[t.to]={type:t.captured,color:c};else if(t.flags&h.EP_CAPTURE){var s;s=a===n?t.to-16:t.to+16,O[s]={type:i,color:c}}t.flags&(h.KSIDE_CASTLE|h.QSIDE_CASTLE)&&(t.flags&h.KSIDE_CASTLE?(r=t.to+1,o=t.to-1):t.flags&h.QSIDE_CASTLE&&(r=t.to-2,o=t.to+1),O[r]=O[o],O[o]=null);return t}function X(e,n){var t=U(e);if(n){var r=t.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(r)var o=r[1],a=r[2],s=r[3],u=r[4]}var l=function(e){var n=e.charAt(0);if(n>="a"&&n<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return i}return"o"===(n=n.toLowerCase())?c:n}(t),f=null,d=K({legal:!0,piece:o||l});if(f=d,n){var p=K({legal:!1,piece:o||l});f=p}for(var b=0,g=f.length;b<g;b++){if(t===U(Q(f[b],d))||n&&t===U(Q(f[b],p)))return f[b];if(r&&(!o||o.toLowerCase()==f[b].piece)&&v[a]==f[b].from&&v[s]==f[b].to&&(!u||u.toLowerCase()==f[b].promotion))return f[b]}return null}function Y(e){return e>>4}function ee(e){return 15&e}function ne(e){var n=ee(e),t=Y(e);return"abcdefgh".substring(n,n+1)+"87654321".substring(t,t+1)}function te(e){return e===t?n:t}function re(e){var n=oe(e);n.san=Q(n,K({legal:!0})),n.to=ne(n.to),n.from=ne(n.from);var t="";for(var r in h)h[r]&n.flags&&(t+=g[r]);return n.flags=t,n}function oe(e){var n=e instanceof Array?[]:{};for(var t in e)n[t]="object"===typeof t?oe(e[t]):e[t];return n}function ie(e){return e.replace(/^\s+|\s+$/g,"")}function ae(e){for(var n=K({legal:!1}),t=0,r=x,o=0,i=n.length;o<i;o++){if(V(n[o]),!W(r))if(e-1>0)t+=ae(e-1);else t++;Z()}return t}return R("undefined"===typeof e?s:e),{WHITE:t,BLACK:n,PAWN:i,KNIGHT:"n",BISHOP:a,ROOK:"r",QUEEN:"q",KING:c,SQUARES:function(){for(var e=[],n=v.a8;n<=v.h1;n++)136&n?n+=7:e.push(ne(n));return e}(),FLAGS:g,load:function(e){return R(e)},reset:function(){return A()},moves:function(e){for(var n=K(e),t=[],r=0,o=n.length;r<o;r++)"undefined"!==typeof e&&"verbose"in e&&e.verbose?t.push(re(n[r])):t.push(Q(n[r],K({legal:!0})));return t},in_check:function(){return $()},in_checkmate:function(){return z()},in_stalemate:function(){return G()},in_draw:function(){return S>=100||G()||H()||J()},insufficient_material:function(){return H()},in_threefold_repetition:function(){return J()},game_over:function(){return S>=100||z()||G()||H()||J()},validate_fen:function(e){return M(e)},fen:function(){return N()},board:function(){for(var e=[],n=[],t=v.a8;t<=v.h1;t++)null==O[t]?n.push(null):n.push({type:O[t].type,color:O[t].color}),t+1&136&&(e.push(n),n=[],t+=8);return e},pgn:function(e){var n="object"===typeof e&&"string"===typeof e.newline_char?e.newline_char:"\n",t="object"===typeof e&&"number"===typeof e.max_width?e.max_width:0,o=[],i=!1;for(var a in q)o.push("["+a+' "'+q[a]+'"]'+n),i=!0;i&&P.length&&o.push(n);for(var c=function(e){var n=C[N()];if("undefined"!==typeof n){var t=e.length>0?" ":"";e="".concat(e).concat(t,"{").concat(n,"}")}return e},s=[];P.length>0;)s.push(Z());var u=[],l="";for(0===s.length&&u.push(c(""));s.length>0;){l=c(l);var f=s.pop();P.length||"b"!==f.color?"w"===f.color&&(l.length&&u.push(l),l=E+"."):l=E+". ...",l=l+" "+Q(f,K({legal:!1})),V(f)}if(l.length&&u.push(c(l)),"undefined"!==typeof q.Result&&u.push(q.Result),0===t)return o.join("")+u.join(" ");var d=function(){return o.length>0&&" "===o[o.length-1]&&(o.pop(),!0)},p=function(e,i){var a,c=Object(r.a)(i.split(" "));try{for(c.s();!(a=c.n()).done;){var s=a.value;if(s){if(e+s.length>t){for(;d();)e--;o.push(n),e=0}o.push(s),e+=s.length,o.push(" "),e++}}}catch(u){c.e(u)}finally{c.f()}return d()&&e--,e},b=0;for(a=0;a<u.length;a++)b+u[a].length>t&&u[a].includes("{")?b=p(b,u[a]):(b+u[a].length>t&&0!==a?(" "===o[o.length-1]&&o.pop(),o.push(n),b=0):0!==a&&(o.push(" "),b++),o.push(u[a]),b+=u[a].length);return o.join("")},load_pgn:function(e,n){var t="undefined"!==typeof n&&"sloppy"in n&&n.sloppy;function r(e){return e.replace(/\\/g,"\\")}var o="object"===typeof n&&"string"===typeof n.newline_char?n.newline_char:"\r?\n",i=new RegExp("^(\\[((?:"+r(o)+")|.)*\\])(?:"+r(o)+"){2}"),a=i.test(e)?i.exec(e)[1]:"";A();var c=function(e,n){for(var t="object"===typeof n&&"string"===typeof n.newline_char?n.newline_char:"\r?\n",o={},i=e.split(new RegExp(r(t))),a="",c="",s=0;s<i.length;s++)a=i[s].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),c=i[s].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),ie(a).length>0&&(o[a]=c);return o}(a,n);for(var s in c)I([s,c[s]]);if("1"===c.SetUp&&(!("FEN"in c)||!R(c.FEN,!0)))return!1;for(var l=function(e){return e=e.replace(new RegExp(r(o),"g")," "),"{".concat(function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/\%/g,"").toLowerCase()})).join("")}(e.slice(1,e.length-1)),"}")},f=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+e.match(/.{1,2}/g).join("%"))}(e.slice(1,e.length-1))},d=e.replace(a,"").replace(new RegExp("({[^}]*})+?|;([^".concat(r(o),"]*)"),"g"),(function(e,n,t){return void 0!==n?l(n):" "+l("{".concat(t.slice(1),"}"))})).replace(new RegExp(r(o),"g")," "),p=/(\([^\(\)]+\))+?/g;p.test(d);)d=d.replace(p,"");var b=ie(d=(d=(d=d.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));b=b.join(",").replace(/,,+/g,",").split(",");for(var g="",h=0;h<b.length-1;h++){var v=f(b[h]);if(void 0===v){if(null==(g=X(b[h],t)))return!1;V(g)}else C[N()]=v}if(void 0!==(v=f(b[b.length-1]))&&(C[N()]=v,b.pop()),g=b[b.length-1],u.indexOf(g)>-1)(function(e){for(var n in e)return!0;return!1})(q)&&"undefined"===typeof q.Result&&I(["Result",g]);else{if(null==(g=X(g,t)))return!1;V(g)}return!0},header:function(){return I(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",n=v.a8;n<=v.h1;n++){if(0===ee(n)&&(e+=" "+"87654321"[Y(n)]+" |"),null==O[n])e+=" . ";else{var r=O[n].type;e+=" "+(O[n].color===t?r.toUpperCase():r.toLowerCase())+" "}n+1&136&&(e+="|\n",n+=8)}return e+="   +------------------------+\n",e+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return x},move:function(e,n){var t="undefined"!==typeof n&&"sloppy"in n&&n.sloppy,r=null;if("string"===typeof e)r=X(e,t);else if("object"===typeof e)for(var o=K(),i=0,a=o.length;i<a;i++)if(e.from===ne(o[i].from)&&e.to===ne(o[i].to)&&(!("promotion"in o[i])||e.promotion===o[i].promotion)){r=o[i];break}if(!r)return null;var c=re(r);return V(r),c},undo:function(){var e=Z();return e?re(e):null},clear:function(){return k()},put:function(e,n){return L(e,n)},get:function(e){return T(e)},remove:function(e){return function(e){var n=T(e);return O[v[e]]=null,n&&n.type===c&&(m[n.color]=o),D(N()),n}(e)},perft:function(e){return ae(e)},square_color:function(e){if(e in v){var n=v[e];return(Y(n)+ee(n))%2===0?"light":"dark"}return null},history:function(e){for(var n=[],t=[],r=("undefined"!==typeof e&&"verbose"in e&&e.verbose);P.length>0;)n.push(Z());for(;n.length>0;){var o=n.pop();r?t.push(re(o)):t.push(Q(o,K({legal:!0}))),V(o)}return t},get_comment:function(){return C[N()]},set_comment:function(e){C[N()]=e.replace("{","[").replace("}","]")},delete_comment:function(){var e=C[N()];return delete C[N()],e},get_comments:function(){return _(),Object.keys(C).map((function(e){return{fen:e,comment:C[e]}}))},delete_comments:function(){return _(),Object.keys(C).map((function(e){var n=C[e];return delete C[e],{fen:e,comment:n}}))}}};"undefined"!==typeof exports&&(exports.Chess=o),"undefined"!==typeof define&&define((function(){return o}))},80:function(e,n,t){"use strict";t.r(n);var r=t(2),o=t.n(r),i=t(34),a=t.n(i),c=(t(46),t(47),t(1)),s=t(3),u=t(35),l=t.n(u),f=t(13),d=t(16),p=t(5),b="abcdefgh".split("");function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function h(e){return"string"===typeof e}function v(e){if(!function(e){var n,t;return!1!==g(e)&&(void 0===(n=e.constructor)||!1!==g(t=n.prototype)&&!1!==t.hasOwnProperty("isPrototypeOf"))}(e))return!1;for(var n in e)if(e.hasOwnProperty(n)&&(!h(r=n)||-1===r.search(/^[a-h][1-8]$/)||(!h(t=e[n])||-1===t.search(/^[bw][KQRNBP]$/))))return!1;var t,r;return!0}function j(e){var n=e.split("");return"w"===n[0]?n[1].toUpperCase():n[1].toLowerCase()}var O,m,x,y,w,S,E,P,q,C,k=function(e){if(!v(e))return!1;for(var n="",t=8,r=0;r<8;r++){for(var o=0;o<8;o++){var i=b[o]+t;e.hasOwnProperty(i)?n+=j(e[i]):n+="1"}7!==r&&(n+="/"),t-=1}return n=function(e){return e.replace(/11111111/g,"8").replace(/1111111/g,"7").replace(/111111/g,"6").replace(/11111/g,"5").replace(/1111/g,"4").replace(/111/g,"3").replace(/11/g,"2")}(n)},_=function(e){if(!function(e){if(!h(e))return!1;var n=(e=function(e){return e.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}(e=e.replace(/ .+$/,""))).split("/");if(8!==n.length)return!1;for(var t=0;t<8;t++)if(8!==n[t].length||-1!==n[t].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}(e))return!1;for(var n,t=(e=e.replace(/ .+$/,"")).split("/"),r={},o=8,i=0;i<8;i++){for(var a=t[i].split(""),c=0,s=0;s<a.length;s++){if(-1!==a[s].search(/[1-8]/))c+=parseInt(a[s],10);else r[b[c]+o]=(n=a[s]).toLowerCase()===n?"b"+n.toUpperCase():"w"+n.toUpperCase(),c+=1}o-=1}return r},A="BOARD_MOVE_UPDATE",R="BOARD_MOVE_UNDO",M=t(48),N="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",I=function(e){var n=e.pieceSquare,t=e.history,r=(t.length&&t[t.length-1].from,t.length&&t[t.length-1].to);return Object(c.a)(Object(p.a)({},n,{backgroundColor:"rgba(123,97,255,0.5)"}),t.length&&Object(p.a)({},r,{backgroundColor:"rgba(123,97,255,0.5)"}))},D=function(e,n){var t=Object(r.useState)(new M(N)),o=Object(s.a)(t,1)[0],i=Object(r.useState)(!1),a=Object(s.a)(i,2),u=a[0],l=a[1],b=Object(r.useState)({turn:o.turn()||"w",fen:"start",orientation:"white",pendingMove:void 0,dropSquareStyle:{},squareStyles:{},pieceSquare:"",square:"",history:[],boardPosition:{},pgn:"",undoMovesArray:[]}),g=Object(s.a)(b,2),h=g[0],v=g[1];Object(r.useEffect)((function(){console.log("POSITION: ",h.boardPosition,o.in_check(),o.turn()),o.in_check()&&O(o.turn())}),[h.boardPosition]),Object(r.useEffect)((function(){console.log("UNDO MOVES: ",h.undoMovesArray)}),[h.undoMovesArray]),Object(r.useEffect)((function(){var t;e.channel&&(null===(t=e.channel)||void 0===t||t.on("ChannelMessage",(function(e){var t,r=(t=e.text,JSON.parse(t));switch(r.type){case A:m({sourceSquare:r.json.move.from,targetSquare:r.json.move.to});break;case R:var i={chess:o,state:h,setState:v,undoArray:r.json.undoArray};n.undoMove(i);break;default:console.log("INVALID OPERATION")}})))}),[e.channel]),Object(r.useEffect)((function(){console.log("PGN: ",h.pgn)}),[h.pgn]);var j=function(){return l(!0)},O=function(e){var n=Object.keys(h.boardPosition).find((function(n){return h.boardPosition[n]==="".concat(e,"K")}));console.log("INCHECK: ",Object.keys(h.boardPosition).find((function(n){return h.boardPosition[n]==="".concat(e,"K")}))),v(Object(c.a)(Object(c.a)({},h),{},{squareStyles:Object(c.a)(Object(c.a)({},h.squareStyles),{},Object(p.a)({},n,{backgroundColor:"red"}))}))},m=function(e){for(var t=e.sourceSquare,r=e.targetSquare,i=(e.piece,o.move({from:t,to:r})),a=o.moves({verbose:!0}),s=0,u=a.length;s<u;s++)if(-1!==a[s].flags.indexOf("p")&&a[s].from===t)return v(Object(c.a)(Object(c.a)({},h),{},{pendingMove:{sourceSquare:t,targetSquare:r}})),void j();if(null!==i){v((function(e){var n=e.history,t=e.pieceSquare;return Object(c.a)(Object(c.a)({},h),{},{turn:o.turn(),fen:o.fen(),pgn:o.pgn(),history:o.history({verbose:!0}),squareStyles:I({pieceSquare:t,history:n})})}));var l=[];a.forEach((function(e){o.move(e),l.push(o.fen()),o.undo()})),console.log("FENS: ",l),n.updateBoard(i)}};return{turn:h.turn,fen:h.fen,pgn:h.pgn,history:h.history,orientation:h.orientation,squareStyles:h.squareStyles,pendingMove:h.pendingMove,promotionModal:u,setBoardPosition:function(e){v(Object(c.a)(Object(c.a)({},h),{},{boardPosition:e}))},reset:function(){o.reset(),v(Object(c.a)(Object(c.a)({},h),{},{fen:N,boardPosition:_(N)}))},flip:function(){v(Object(c.a)(Object(c.a)({},h),{},{orientation:"white"===h.orientation?"black":"white"}))},onDrop:m,onMouseOverSquare:function(e){var n=o.moves({square:e,verbose:!0});if(0!==n.length){var t,r=[],i=Object(f.a)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.push(a.to)}}catch(s){i.e(s)}finally{i.f()}!function(e,n){var t=[e].concat(Object(d.a)(n)).reduce((function(e,n){return Object(c.a)(Object(c.a)(Object(c.a)({},e),Object(p.a)({},n,{background:"radial-gradient(circle, rgb(123,97,255,0.5) 20%, transparent 0%)",borderRadius:"50%"})),I({history:h.history,pieceSquare:h.pieceSquare}))}),{});v((function(e){var n=e.squareStyles;return Object(c.a)(Object(c.a)({},h),{},{squareStyles:Object(c.a)(Object(c.a)({},n),t)})}))}(e,r)}},onMouseOutSquare:function(e){!function(){var e=Object.keys(h.boardPosition).find((function(e){return h.boardPosition[e]==="".concat(o.turn(),"K")}));v((function(n){var t=n.pieceSquare,r=n.history;return Object(c.a)(Object(c.a)({},h),{},{squareStyles:o.in_check()&&e?Object(p.a)({},e,h.squareStyles[e]):I({pieceSquare:t,history:r})})}))}()},onDragOverSquare:function(e){v(Object(c.a)(Object(c.a)({},h),{},{dropSquareStyle:"e4"===e||"d4"===e||"e5"===e||"d5"===e?{backgroundColor:"cornFlowerBlue"}:{boxShadow:"inset 0 0 1px 4px rgb(255, 255, 0)"}}))},onSquareClick:function(e){v((function(n){var t=n.history;return Object(c.a)(Object(c.a)({},h),{},{squareStyles:Object(c.a)(Object(c.a)({},h.squareStyles),I({pieceSquare:e,history:t})),pieceSquare:e})}));for(var t=o.move({from:h.pieceSquare,to:e}),r=o.moves({verbose:!0}),i=0,a=r.length;i<a;i++)if(r[i].flags.includes("p")&&r[i].from===h.pieceSquare)return v(Object(c.a)(Object(c.a)({},h),{},{pendingMove:{sourceSquare:h.pieceSquare,targetSquare:e}})),void j();null!==t&&(v(Object(c.a)(Object(c.a)({},h),{},{turn:o.turn(),fen:o.fen(),pgn:o.pgn(),history:o.history({verbose:!0}),pieceSquare:""})),n.updateBoard(t))},onSquareRightClick:function(e){return v(Object(c.a)(Object(c.a)({},h),{},{squareStyles:Object(p.a)({},e,{backgroundColor:"deepPink"})}))},undoMove:function(){var e=o.undo();e&&(v(Object(c.a)(Object(c.a)({},h),{},{fen:o.fen(),undoMovesArray:[].concat(Object(d.a)(h.undoMovesArray),[e])})),n.undoMoveMsg([].concat(Object(d.a)(h.undoMovesArray),[e])))},redoMove:function(){if(0!==h.undoMovesArray.length){var e=h.undoMovesArray.pop();if(console.log("REDO: ",e),e){var t=o.move(e);console.log("REDONE: ",t),null!==t&&(v((function(e){var n=e.history,t=e.pieceSquare;return Object(c.a)(Object(c.a)({},h),{},{fen:o.fen(),pgn:o.pgn(),history:o.history({verbose:!0}),squareStyles:I({pieceSquare:t,history:n})})})),n.updateBoard(t))}}},promotion:function(e,n,t){var r=e,i=n;o.move({from:r,to:i,promotion:t}),v(Object(c.a)(Object(c.a)({},h),{},{fen:o.fen(),pendingMove:void 0})),l(!1)}}},T=t(20),L=t.n(T),B=t(36),K=t(37),Q=t.n(K),U=t(38),F=t.n(U),W={messageParser:function(e){return{text:(n=e,JSON.stringify(n)),messageType:"TEXT"};var n}},$=function(){var e=Object(r.useState)(null),n=Object(s.a)(e,2),t=n[0],o=n[1],i=Q.a.createInstance("f4b36b6c897e41bfaa3904d75da40777"),a={uid:(Math.floor(9e4*Math.random())+1e4).toString(),token:""};Object(r.useEffect)((function(){(function(){var e=Object(B.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.a.get("https://agoratokenserver-demo.herokuapp.com/access_token?channel=test&uid=".concat(a.uid)).then((function(e){var n;console.log(e),a.token=(null===(n=e.data)||void 0===n?void 0:n.token)||"",i.login(a).then((function(){console.log("Login successful");var e=i.createChannel("test");e.join(),o(e)}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){console.log("integrations successful")}))}),[]),Object(r.useEffect)((function(){t&&(null===t||void 0===t||t.on("MemberJoined",(function(e){console.log("New member joined: ",e)})),null===t||void 0===t||t.on("MemberLeft",(function(e){console.log("Member left: ",e)})))}),[t]);return{channel:t,playerMeta:a,sendChannelMessage:function(e,n){var r={uid:a.uid,json:e||{},type:n};console.log(W.messageParser(r)),null===t||void 0===t||t.sendMessage(W.messageParser(r)).then((function(){}))}}},z=function(e){var n=e.Agora;return{updateBoard:function(e){var t={move:e};null===n||void 0===n||n.sendChannelMessage(t,A)},undoMoveMsg:function(e){var t={undoArray:e};null===n||void 0===n||n.sendChannelMessage(t,R)},undoMove:function(e){var n=e.chess,t=e.state,r=e.setState,o=e.undoArray;n.undo()&&r(Object(c.a)(Object(c.a)({},t),{},{fen:n.fen(),undoMovesArray:o}))}}},G=t(68),H="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",J="8/8/8/8/8/8/8/8",V=function(){var e=Object(r.useState)(new G(H)),n=(Object(s.a)(e,1)[0],Object(r.useState)({fen:H,orientation:"white",dropSquareStyle:{},squareStyles:{},pieceSquare:"",square:"",history:[],boardPosition:_(H),pgn:[]})),t=Object(s.a)(n,2),o=t[0],i=t[1];Object(r.useEffect)((function(){console.log("BOARD_POSITION: ",k(o.boardPosition))}),[o.boardPosition]);return{fen:o.fen,pgn:o.pgn,boardPosition:o.boardPosition,orientation:o.orientation,onDrop:function(e){var n,t=e.sourceSquare,r=e.targetSquare,a=e.piece;console.log("EDITOR_ON_DROP: ",t,r,a),n="spare"===t?Object(c.a)(Object(c.a)({},o.boardPosition),{},Object(p.a)({},r,a)):Object(c.a)(Object(c.a)({},Object.fromEntries(Object.entries(o.boardPosition).filter((function(e){var n=Object(s.a)(e,2),r=n[0];n[1];return r!==t})))),{},Object(p.a)({},r,a)),console.log("BOARD_POSITION: ",n),i(Object(c.a)(Object(c.a)({},o),{},{fen:k(n)||o.fen,boardPosition:n}))},setBoardPosition:function(e){i(Object(c.a)(Object(c.a)({},o),{},{fen:k(e)||o.fen,boardPosition:e}))},setFenPosition:function(e){i(Object(c.a)(Object(c.a)({},o),{},{fen:e,boardPosition:_(e)}))},reset:function(){i(Object(c.a)(Object(c.a)({},o),{},{fen:H,boardPosition:_(H)}))},clear:function(){i(Object(c.a)(Object(c.a)({},o),{},{fen:J,boardPosition:_(J)}))},flip:function(){i(Object(c.a)(Object(c.a)({},o),{},{orientation:"white"===o.orientation?"black":"white"}))}}},Z=t(6),X=t(7),Y=Object(X.a)(O||(O=Object(Z.a)(["\n  background-color: #2b2b34;\n  width: 386px;\n  border-radius: 0px 16px 16px 0px;\n"]))),ee=X.b.div(m||(m=Object(Z.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  ","\n"])),(function(e){return e.editorMode&&Y})),ne=X.b.div(x||(x=Object(Z.a)(["\n  div {\n    padding: 14px;\n    cursor: pointer;\n  }\n"]))),te=X.b.div(y||(y=Object(Z.a)(["\n  div {\n    padding: 14px;\n    cursor: pointer;\n  }\n"]))),re=X.b.div(w||(w=Object(Z.a)(["\n  position: relative;\n  /* width: 176px; */\n  /* height: 242px; */\n  background: #2b2b34;\n  border: 1.46px solid #424242;\n  box-sizing: border-box;\n  padding: 10px 0px;\n  .title {\n    display: flex;\n    margin-left: 10px;\n    img {\n      margin-right: 3px;\n    }\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 21px;\n    color: #ffffff;\n    margin-bottom: 11px;\n  }\n  .pgn-section {\n    width: 100%;\n    padding: 10px;\n    /* .error {\n      display: none;\n      height: 0px;\n    }\n    .outerBoard {\n      display: none;\n      height: 0px; \n    }*/\n    .moves {\n      color: white;\n      font-size: 10px;\n      move-number {}\n      move {\n        color: white;\n      }\n    }\n    .comment {\n      .commentRadio {\n        color: white;\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-start;\n        align-items: center;\n        margin: 5px 0px;\n          margin-right: 12px;\n        }\n      }\n    }\n  }\n"]))),oe=X.b.div(S||(S=Object(Z.a)(["\n  position: relative;\n  /* bottom: -52px; */\n  bottom: -1px;\n  left: -1.46px;\n  /* width: 176px; */\n  height: 51px;\n  background: #2b2b34;\n  border: 1.46px solid #424242;\n  /* border-top: 0px; */\n  border-bottom: 0px;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  padding: 13.14px;\n  img {\n    cursor: pointer;\n  }\n"]))),ie=X.b.div(E||(E=Object(Z.a)(["\n  padding: 26px;\n  height: 100%;\n  .title {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 24px;\n    line-height: 29px;\n    color: #ffffff;\n  }\n  .divider {\n    width: 100%;\n    height: 0.5px;\n    background: #ffffff;\n    opacity: 0.1;\n    margin: 13.5px 0;\n    margin-bottom: 156px;\n  }\n  .slider {\n    width: 100%;\n    height: 32px;\n    background: #e8edf9;\n    border-radius: 10px;\n    display: flex;\n    /* margin-bottom: 156px; */\n    div {\n      width: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n  }\n  label {\n    margin-bottom: 8px;\n    font-weight: 500;\n    font-size: 13px;\n    line-height: 16px;\n    text-transform: uppercase;\n    color: #ffffff;\n    opacity: 0.4;\n  }\n  .input-fen {\n    display: flex;\n    width: 100%;\n    margin-bottom: 24px;\n    input {\n      width: 100%;\n      height: 32px;\n      border-radius: 8px;\n    }\n  }\n  .output-fen {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    height: 32px;\n    border-radius: 8px;\n    background: #ffffff;\n    overflow: hidden;\n    margin-bottom: 24px;\n    text-overflow: ellipsis;\n  }\n  .btn-panel {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    button {\n      width: 32%;\n      height: 40px;\n      color: #ffffff;\n      font-weight: 600;\n      font-size: 17px;\n      line-height: 20px;\n      background: #5656ff;\n      border: 1px solid rgba(255, 255, 255, 0.4);\n      box-sizing: border-box;\n      border-radius: 10px;\n    }\n  }\n"]))),ae=Object(X.a)(P||(P=Object(Z.a)(['\n  div[class$="-spare-pieces"] {\n    position: absolute;\n    width: 340px;\n    display: flex;\n    justify-content: space-between;\n    div[data-testid^="spare-"]:nth-child(odd) {\n      background: #b7c0d8;\n    }\n    div[data-testid^="spare-"]:nth-child(even) {\n      background: #e8edf9;\n    }\n    div {\n      /* width: 100%; */\n      margin: 2px;\n      border-radius: 12px;\n      div {\n        img {\n          padding: 8px 10px;\n          width: 26px !important;\n          height: 28px !important;\n        }\n      }\n    }\n  }\n']))),ce=X.b.div(q||(q=Object(Z.a)(["\n  display: flex;\n  flex-direction: row;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #2b2b34;\n  padding: 10px;\n  border-radius: 12px;\n  z-index: 6;\n  div:nth-child(odd) {\n    background: #b7c0d8;\n  }\n  div:nth-child(even) {\n    background: #e8edf9;\n  }\n  div {\n    margin: 2px;\n    border-radius: 12px;\n    img {\n      cursor: pointer;\n      padding: 8px 10px;\n      width: 26px;\n      height: 28px;\n    }\n  }\n"]))),se=X.b.div(C||(C=Object(Z.a)(['\n  display: flex;\n  /* width: 1000px; */\n  /* height: fit-content; */\n  max-width: 1440px;\n  background: black;\n  grid-template-columns: 66% 37%;\n  grid-template-areas: "board sidePanel";\n  .board-container {\n    position: relative;\n    min-width: 500px;\n    min-height: 500px;\n    grid-area: board;\n    border: 10px solid rgba(255, 255, 255);\n    div {\n      ',"\n      .black-spare-pieces {\n        left: ",";\n        bottom: ",";\n\n        /* background:grey; */\n      }\n      .white-spare-pieces {\n        left: ",";\n        bottom: ",";\n        /* background:grey; */\n      }\n    }\n  }\n\n  "," {\n    grid-area: sidePanel;\n    /* width: 100%; */\n    /* height: 100%; */\n    ",", "," {\n      background: #2b2b34;\n      border: 2px solid rgba(255, 255, 255, 0.1);\n      border-radius: 0 8px 8px 0;\n    }\n  }\n"])),(function(e){return e.editorMode&&ae}),(function(e){return e.dimension?"".concat(e.dimension+32,"px"):"0px"}),(function(e){return e.dimension?"".concat(e.dimension-130,"px"):"0px"}),(function(e){return e.dimension?"".concat(e.dimension+32,"px"):"0px"}),(function(e){return e.dimension?"".concat(e.dimension-190,"px"):"0px"}),ee,ne,te),ue=t.p+"static/media/undoMove.586eb02f.svg",le=t.p+"static/media/redoMove.c6f42448.svg",fe=t.p+"static/media/history.8223d0ff.svg",de=t.p+"static/media/resetBoard.7af0fcde.svg",pe=t.p+"static/media/flipBoard.c1ef8478.svg",be=t.p+"static/media/loadGame.28f8774a.svg",ge=t.p+"static/media/wK.3b342df8.svg",he=t.p+"static/media/wQ.785db365.svg",ve=t.p+"static/media/wB.56f72474.svg",je=t.p+"static/media/wR.33cf0258.svg",Oe=t.p+"static/media/wN.d5fa39eb.svg",me=t.p+"static/media/wP.5f74a9fe.svg",xe=t.p+"static/media/bK.e57316c7.svg",ye=t.p+"static/media/bQ.c21470b8.svg",we=t.p+"static/media/bB.1f023e3e.svg",Se=t.p+"static/media/bR.2724e583.svg",Ee=t.p+"static/media/bN.a46c4723.svg",Pe=t.p+"static/media/bP.d9262a65.svg",qe=t.p+"static/media/arrowLeft.7e025148.svg",Ce=t.p+"static/media/arrowRight.ae8c68ee.svg",ke=t(15),_e=t(0),Ae=function(e){var n=e.pgn,t=e.mode,o={pgn:n,timerTime:"1",startPlay:null===n||void 0===n?void 0:n.split(/\d\./).join("").split(" ").filter((function(e){return""!==e})).length,showResult:!0,boardSize:"160",showFen:!1,showCoords:!1,figurine:!0,movesHeight:"78px"},i="board-0";return Object(r.useLayoutEffect)((function(){switch(t){case"view":Object(ke.pgnView)(i,o);break;case"edit":Object(ke.pgnEdit)(i,o);break;case"print":Object(ke.pgnPrint)(i,o)}})),Object(_e.jsx)("div",{id:i})},Re=function(e,n){return e.pgn===n.pgn},Me=o.a.memo(Ae,Re),Ne=function(e){var n=e.undoMove,t=e.redoMove,r=e.flip,o=e.reset,i=e.setSidePanelSection;return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)(ne,{children:[Object(_e.jsx)("div",{onClick:n,children:Object(_e.jsx)("img",{src:ue,alt:"Undo"})}),Object(_e.jsx)("div",{onClick:t,children:Object(_e.jsx)("img",{src:le,alt:"Redo"})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:fe,alt:"History",onClick:function(){i("history")}})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:de,alt:"Reset",onClick:o})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:pe,alt:"Flip",onClick:r})})]}),Object(_e.jsx)(te,{children:Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:be,alt:"Load"})})})]})},Ie=function(e){var n,t,o=Object(r.useState)(),i=Object(s.a)(o,2),a=i[0],u=i[1],f=Object(r.useState)("true"===Object.fromEntries(new URLSearchParams(window.location.search).entries()).editorMode||!1),d=Object(s.a)(f,2),p=d[0],b=(d[1],Object(r.useState)("menu")),g=Object(s.a)(b,2),h=g[0],v=g[1],j=$(),O=z({Agora:j}),m=V(),x=D(j,O),y=x.turn,w=x.setBoardPosition,S=x.reset,E=x.flip,P=x.orientation,q=x.pendingMove,C=x.fen,k=x.pgn,_=(x.history,x.promotionModal),A=x.onDrop,R=x.onMouseOverSquare,M=x.onMouseOutSquare,N=x.squareStyles,I=x.onDragOverSquare,T=x.onSquareClick,L=x.onSquareRightClick,B=x.undoMove,K=x.redoMove,Q=x.promotion;Object(r.useEffect)((function(){return U(),window.addEventListener("resize",U),function(){return window.removeEventListener("resize",U)}}),[]),Object(r.useEffect)((function(){var e,r=null===(e=window.document.getElementById("board-container"))||void 0===e?void 0:e.querySelector("div");n=null===r||void 0===r?void 0:r.firstElementChild,t=null===r||void 0===r?void 0:r.lastElementChild,n&&t&&(n.classList.add("black-spare-pieces"),t.classList.add("white-spare-pieces"),n.setAttribute("style",""),t.setAttribute("style",""))}),[window.document.getElementById("board-container")]);var U=function(){var e;u(null===(e=window.document.getElementById("board-container"))||void 0===e?void 0:e.clientWidth)},F={wK:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:ge,alt:"wK"})},wQ:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:he,alt:"wQ"})},wB:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:ve,alt:"wB"})},wR:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:je,alt:"wR"})},wN:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:Oe,alt:"wN"})},wP:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:me,alt:"wP"})},bK:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:xe,alt:"bK"})},bQ:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:ye,alt:"bQ"})},bB:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:we,alt:"bB"})},bR:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:Se,alt:"bR"})},bN:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:Ee,alt:"bN"})},bP:function(e){var n=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:n,height:n},src:Pe,alt:"bP"})}},W=Object(c.a)(Object(c.a)(Object(c.a)({id:"board-0",position:p?m.boardPosition:C,dropOffBoard:p?"trash":"snapback",draggable:!0,lightSquareStyle:{backgroundColor:"#E8EDF9"},darkSquareStyle:{backgroundColor:"#B7C0D8"},pieces:F,boardStyle:{width:a,height:a,position:"relative"},width:a,getPosition:p?m.setBoardPosition:w},p?{onDrop:m.onDrop}:{onDrop:A}),{},{orientation:p?m.orientation:P||"white"},!p&&{onMouseOverSquare:R,onMouseOutSquare:M,squareStyles:N,onDragOverSquare:I,onSquareClick:T,onSquareRightClick:L}),{},{sparePieces:p}),G=Object(_e.jsxs)(ce,{children:[Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:"w"===y?he:ye,alt:"",width:a&&a/8,height:a&&a/8,onClick:function(){q&&Q(q.sourceSquare,q.targetSquare,"q")}})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:"w"===y?ve:we,alt:"",width:a&&a/8,height:a&&a/8,onClick:function(){q&&Q(q.sourceSquare,q.targetSquare,"b")}})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:"w"===y?je:Se,alt:"",width:a&&a/8,height:a&&a/8,onClick:function(){q&&Q(q.sourceSquare,q.targetSquare,"r")}})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:"w"===y?Oe:Ee,alt:"",width:a&&a/8,height:a&&a/8,onClick:function(){q&&Q(q.sourceSquare,q.targetSquare,"n")}})})]});return Object(_e.jsxs)(se,{dimension:a,editorMode:p,children:[Object(_e.jsxs)("div",{id:"board-container",className:"board-container",children:[_&&G,Object(_e.jsx)(l.a,Object(c.a)({},W))]}),Object(_e.jsx)(ee,{editorMode:p,children:p?Object(_e.jsxs)(ie,{children:[Object(_e.jsx)("div",{className:"title",children:"Board Settings"}),Object(_e.jsx)("div",{className:"divider"}),Object(_e.jsx)("label",{htmlFor:"inputFen",children:"Fen"}),Object(_e.jsx)("div",{className:"input-fen",children:Object(_e.jsx)("input",{name:"inputFen",type:"text",value:null===m||void 0===m?void 0:m.fen,onChange:function(e){m.setFenPosition(e.target.value)}})}),Object(_e.jsxs)("div",{className:"btn-panel",children:[Object(_e.jsx)("button",{onClick:m.reset,children:"Reset"}),Object(_e.jsx)("button",{onClick:m.clear,children:"Clear"}),Object(_e.jsx)("button",{onClick:null===m||void 0===m?void 0:m.flip,children:"Flip"})]})]}):Object(_e.jsx)(_e.Fragment,{children:function(){switch(h){case"menu":return Object(_e.jsx)(Ne,{undoMove:B,redoMove:K,reset:S,flip:E,setSidePanelSection:v});case"history":return Object(_e.jsxs)(re,{children:[Object(_e.jsxs)("div",{className:"title",children:[Object(_e.jsx)("img",{src:fe,alt:""}),"History"]}),Object(_e.jsx)("div",{className:"pgn-section",children:k&&Object(_e.jsx)(Me,{pgn:k,mode:"edit"})}),Object(_e.jsxs)(oe,{children:[Object(_e.jsx)("img",{src:qe,alt:"",onClick:function(){v("menu")}}),Object(_e.jsx)("img",{src:Ce,alt:""})]})]});default:return Object(_e.jsx)(Ne,{undoMove:B,redoMove:K,reset:S,flip:E,setSidePanelSection:v})}}()})})]})};var De=function(){return Object(_e.jsx)("div",{className:"app",children:Object(_e.jsx)(Ie,{})})},Te=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,81)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),r(e),o(e),i(e),a(e)}))};a.a.render(Object(_e.jsx)(o.a.StrictMode,{children:Object(_e.jsx)(De,{})}),document.getElementById("root")),Te()}},[[80,1,2]]]);
//# sourceMappingURL=main.8a85fa93.chunk.js.map