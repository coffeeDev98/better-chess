(this["webpackJsonpbetter-chess"]=this["webpackJsonpbetter-chess"]||[]).push([[0],{11:function(e,t,n){"use strict";n.r(t);var i=n(4),r=function e(){Object(i.a)(this,e)};r.WHITE="w",r.BLACK="b",r.NONE="~",t.default=r},13:function(e,t,n){"use strict";n.r(t),function(e){var t=n(4),i=function e(){Object(t.a)(this,e)};i.NONE=".",i.PAWN="p",i.KNIGHT="n",i.BISHOP="b",i.ROOK="r",i.QUEEN="q",i.KING="k",e.exports=i}.call(this,n(10)(e))},15:function(e,t,n){"use strict";n.r(t),function(e){var t,i=n(2),r=n(4),o=function e(){Object(r.a)(this,e)};o.NORMAL=1,o.CAPTURE=2,o.BIG_PAWN=4,o.EP_CAPTURE=8,o.PROMOTION=16,o.KSIDE_CASTLE=32,o.QSIDE_CASTLE=64,o.DISPLAY=(t={},Object(i.a)(t,o.NORMAL,"n"),Object(i.a)(t,o.CAPTURE,"c"),Object(i.a)(t,o.BIG_PAWN,"b"),Object(i.a)(t,o.EP_CAPTURE,"e"),Object(i.a)(t,o.PROMOTION,"p"),Object(i.a)(t,o.KSIDE_CASTLE,"k"),Object(i.a)(t,o.QSIDE_CASTLE,"q"),t),e.exports=o}.call(this,n(10)(e))},25:function(e,t,n){"use strict";n.r(t),function(e){var t=n(4),i=n(5),r=function(){function e(){Object(t.a)(this,e)}return Object(i.a)(e,null,[{key:"validate",value:function(t){var n=t.split(/\s+/);if(6!==n.length)return{isValid:!1,errorCode:1,errorMessage:e.ERRORS[1]};if(isNaN(n[5])||parseInt(n[5],10)<=0)return{isValid:!1,errorCode:2,errorMessage:e.ERRORS[2]};if(isNaN(n[4])||parseInt(n[4],10)<0)return{isValid:!1,errorCode:3,errorMessage:e.ERRORS[3]};if(!/^(-|[abcdefgh][36])$/.test(n[3]))return{isValid:!1,errorCode:4,errorMessage:e.ERRORS[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(n[2]))return{isValid:!1,errorCode:5,errorMessage:e.ERRORS[5]};if(!/^(w|b)$/.test(n[1]))return{isValid:!1,errorCode:6,errorMessage:e.ERRORS[6]};var i=n[0].split("/");if(8!==i.length)return{isValid:!1,errorCode:7,errorMessage:e.ERRORS[7]};for(var r=0;r<i.length;r++){for(var o=0,a=!1,s=0;s<i[r].length;s++)if(isNaN(i[r][s])){if(!/^[prnbqkPRNBQK]$/.test(i[r][s]))return{isValid:!1,errorCode:9,errorMessage:e.ERRORS[9]};o+=1,a=!1}else{if(a)return{isValid:!1,errorCode:8,errorMessage:e.ERRORS[8]};o+=parseInt(i[r][s],10),a=!0}if(8!==o)return{isValid:!1,errorCode:10,errorMessage:e.ERRORS[10]}}return{isValid:!0,errorCode:0,error:e.ERRORS[0]}}}]),e}();r.ERRORS={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large]."},r.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",r.DEFAULT_POSITION_FULL="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",e.exports=r}.call(this,n(10)(e))},26:function(e,t,n){"use strict";n.r(t),function(e){var t,i,r,o=n(2),a=n(4),s=n(5),c=n(11),u=n(13),l=n(36),d=n(15),h=function(){function e(t){Object(a.a)(this,e);var n=t.from,i=t.to,r=t.movedPiece,o=t.capturedPiece,s=t.promotionPiece,u=t.flags,h=t.boardVariation;if(!e.isValidIndex(n)||!e.isValidIndex(i))throw new Error("illegal 0x88 index passed into new Move(): (from, to) = ".concat(n,", ").concat(i));u||(u=d.NORMAL),s&&(u|=d.PROMOTION),o||u!==d.EP_CAPTURE||(o=r.color===c.WHITE?l.BLACK_PAWN:l.WHITE_PAWN),this.from=n,this.to=i,this.movedPiece=r,this.capturedPiece=o,this.flags=u,this.promotionPiece=s,this.isWildcard=!1,this.algebraic=e.SQUARES_LOOKUP[this.from]+"-"+e.SQUARES_LOOKUP[this.to],this.san=h?e.toSan(this,h):void 0}return Object(s.a)(e,[{key:"toString",value:function(){return this.san}}],[{key:"copyFrom",value:function(t){var n=Object.create(e.prototype);return n.from=t.from,n.to=t.to,n.movedPiece=t.movedPiece,n.capturedPiece=t.capturedPiece,n.flags=t.flags,n.san=t.san,n.promotionPiece=t.promotionPiece,n.isWildcard=t.isWildcard,n.algebraic=t.algebraic,n}},{key:"createFromSan",value:function(t,n){if(!t)return!1;t=t.trim().replace(/[+#?!=]+$/,"");var i=n._generateMoves({calculateSan:!0});if(t===e.WILDCARD_MOVE)return e.createWildcardMove(n);for(var r=0,o=i.length;r<o;r++)if(0===i[r].san.indexOf(t))return i[r];return!1}},{key:"createFromAlgebraic",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.QUEEN;if(!t||!n)return!1;for(var o=e.SQUARES[t],a=e.SQUARES[n],s=i._generateMoves({calculateSan:!0}),c=0,l=s.length;c<l;c++)if(s[c].from===o&&s[c].to===a&&(!s[c].promotionPiece||s[c].promotionPiece.type===r))return s[c];return!1}},{key:"createWildcardMove",value:function(e){var t=e._generateMoves();if(0==t.length)return null;var n=t[0];return n.isWildcard=!0,n}},{key:"isValidIndex",value:function(e){return 0<=e&&e<=7||16<=e&&e<=23||32<=e&&e<=39||48<=e&&e<=55||64<=e&&e<=71||80<=e&&e<=87||96<=e&&e<=103||112<=e&&e<=119}},{key:"toSan",value:function(t,n){if(t.isWildcard)return e.WILDCARD_MOVE;var i="";if(t.flags&d.KSIDE_CASTLE)i="O-O";else if(t.flags&d.QSIDE_CASTLE)i="O-O-O";else{var r=n.getDisambiguator(t);t.movedPiece.type!==u.PAWN&&(i+=t.movedPiece.type.toUpperCase()+r),t.flags&(d.CAPTURE|d.EP_CAPTURE)&&(t.movedPiece.type===u.PAWN&&(i+=e._algebraic(t.from)[0]),i+="x"),i+=e._algebraic(t.to),t.flags&d.PROMOTION&&(i+="="+t.promotionPiece.type.toUpperCase())}var o=n.moveHistory.slice(n.selectedMoveHistoryIndex+1);return n.makeMove(t,null,{},{updatePositionCount:!1,isUserMove:!1}),n.isCheck()&&(n.isCheckmate()?i+="#":i+="+"),n.undoCurrentMove({updatePositionCount:!1}),n.moveHistory=n.moveHistory.concat(o),i}},{key:"_algebraic",value:function(e){var t=15&e,n=e>>4;return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}}]),e}();h.SQUARES={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},h.SQUARES_LOOKUP={0:"a8",1:"b8",2:"c8",3:"d8",4:"e8",5:"f8",6:"g8",7:"h8",16:"a7",17:"b7",18:"c7",19:"d7",20:"e7",21:"f7",22:"g7",23:"h7",32:"a6",33:"b6",34:"c6",35:"d6",36:"e6",37:"f6",38:"g6",39:"h6",48:"a5",49:"b5",50:"c5",51:"d5",52:"e5",53:"f5",54:"g5",55:"h5",64:"a4",65:"b4",66:"c4",67:"d4",68:"e4",69:"f4",70:"g4",71:"h4",80:"a3",81:"b3",82:"c3",83:"d3",84:"e3",85:"f3",86:"g3",87:"h3",96:"a2",97:"b2",98:"c2",99:"d2",100:"e2",101:"f2",102:"g2",103:"h2",112:"a1",113:"b1",114:"c1",115:"d1",116:"e1",117:"f1",118:"g1",119:"h1"},h.PAWN_OFFSETS=(t={},Object(o.a)(t,c.WHITE,[-16,-32,-17,-15]),Object(o.a)(t,c.BLACK,[16,32,17,15]),t),h.PIECE_OFFSETS=(i={},Object(o.a)(i,u.KNIGHT,[-18,-33,-31,-14,18,33,31,14]),Object(o.a)(i,u.BISHOP,[-17,-15,17,15]),Object(o.a)(i,u.ROOK,[-16,1,16,-1]),Object(o.a)(i,u.QUEEN,[-17,-16,-15,1,17,16,15,-1]),Object(o.a)(i,u.KING,[-17,-16,-15,1,17,16,15,-1]),i),h.ATTACKS=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0],h.RAYS=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17,0],h.SHIFTS=(r={},Object(o.a)(r,u.PAWN,0),Object(o.a)(r,u.KNIGHT,1),Object(o.a)(r,u.BISHOP,2),Object(o.a)(r,u.ROOK,3),Object(o.a)(r,u.QUEEN,4),Object(o.a)(r,u.KING,5),r),h.WILDCARD_MOVE="--",e.exports=h}.call(this,n(10)(e))},34:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n(4),o=n(5),a=n(11),s=n(35),c=n(25),u=n(15),l=n(26),d=n(61),h=n(36),v=n(13),g=function(){function e(t){var n,o;Object(r.a)(this,e),this.id=e.id++,this.parentVariation=null,this.parentLastMoveIndex=null,this.turn=a.WHITE,this.enPassantSquare=-1,this.moveNumber=1,this.plyCount=0,this.halfMoves=0,this.board=Array.apply(null,new Array(128)).map((function(){return h.NONE})),this.castlingEligibility=(n={},Object(i.a)(n,a.WHITE,u.KSIDE_CASTLE&u.QSIDE_CASTLE),Object(i.a)(n,a.BLACK,u.KSIDE_CASTLE&u.QSIDE_CASTLE),n),this.kings=(o={},Object(i.a)(o,a.WHITE,-1),Object(i.a)(o,a.BLACK,-1),o),this.moveHistory=[],this.selectedMoveHistoryIndex=-1,this.positionCount=new Map,this.intraMoveAnnotationSlots=[],this.eventLog=t,this.isContinuation=!1}return Object(o.a)(e,[{key:"loadFen",value:function(t){if(!c.validate(t).isValid)return!1;this.id=e.id++,this.board=Array.apply(null,new Array(128)).map((function(){return h.NONE}));for(var n=t.split(/\s+/),i=n[0],r=0,o=0;o<i.length;o++){var s=i.charAt(o);"/"===s?r+=8:-1!=="0123456789".indexOf(s)?r+=parseInt(s,10):(this.put(h.forSymbol(s),e._algebraic(r)),r++)}return this.turn=n[1],n[2].indexOf("K")>-1&&(this.castlingEligibility[a.WHITE]|=u.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this.castlingEligibility[a.WHITE]|=u.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this.castlingEligibility[a.BLACK]|=u.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this.castlingEligibility[a.BLACK]|=u.QSIDE_CASTLE),this.enPassantSquare="-"===n[3]?-1:l.SQUARES[n[3]],this.halfMoves=parseInt(n[4],10),this.moveNumber=parseInt(n[5],10),this.positionCount.set(this.toFen({omitExtras:!0}),1),!0}},{key:"inspect",value:function(){return this.toString()}},{key:"toString",value:function(){for(var t="   +------------------------+"+(this.turn===a.BLACK?"  <-- "+this.plyCount:"")+"\n",n=l.SQUARES.a8;n<=l.SQUARES.h1;n++)0===e._file(n)&&(t+=" "+"87654321"[e._rank(n)]+" |"),t+=" "+this.board[n]+" ",n+1&136&&(t+="|\n",n+=8);return t+="   +------------------------+"+(this.turn===a.WHITE?"  <-- "+this.plyCount:"")+"\n",t+="     a  b  c  d  e  f  g  h\n"}},{key:"toFen",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{omitExtras:!1},n=0,i="",r=l.SQUARES.a8;r<=l.SQUARES.h1;r++)this.board[r]===h.NONE?n++:(n>0&&(i+=n,n=0),i+=this.board[r]),r+1&136&&(n>0&&(i+=n),r!==l.SQUARES.h1&&(i+="/"),n=0,r+=8);if(t.omitExtras)return i;var o="";this.castlingEligibility[a.WHITE]&u.KSIDE_CASTLE&&(o+="K"),this.castlingEligibility[a.WHITE]&u.QSIDE_CASTLE&&(o+="Q"),this.castlingEligibility[a.BLACK]&u.KSIDE_CASTLE&&(o+="k"),this.castlingEligibility[a.BLACK]&u.QSIDE_CASTLE&&(o+="q"),o=o||"-";var s=-1===this.enPassantSquare?"-":e._algebraic(this.enPassantSquare);return[i,this.turn,o,s,this.halfMoves,this.moveNumber].join(" ")}},{key:"put",value:function(e,t){if(!(e in h.LOOKUP)||!(t in l.SQUARES))return!1;var n=l.SQUARES[t];return(e.type!=v.KING||-1===this.kings[e.color]||this.kings[e.color]===n)&&(this.board[n]=e,e.type===v.KING&&(this.kings[e.color]=n),!0)}},{key:"get",value:function(e){return!(!e in l.SQUARES)&&this.board[l.SQUARES[e]]}},{key:"remove",value:function(e){if(!e in l.SQUARES)return!1;var t=this.get(e);return this.board[l.SQUARES[e]]=h.NONE,t.type===v.KING&&(this.kings[t.color]=-1),t}},{key:"moves",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onlyAlgebraicSquares:!1,onlyDestinationSquares:!1,onlyForSquare:void 0};return t.onlyAlgebraicSquares?(e=this._generateMoves({calculateSan:!1}).map((function(e){return e.algebraic})),t.onlyForSquare&&(e=e.filter((function(e){return e.substring(0,2)===t.onlyForSquare}))),t.onlyDestinationSquares&&(e=e.map((function(e){return e.substring(3,5)})))):e=this._generateMoves({calculateSan:!0}).map((function(e){return e.san})),e}},{key:"_applyMove",value:function(e){var t=this.turn,n=t===a.WHITE?a.BLACK:a.WHITE;if(this.board[e.to]=this.board[e.from],this.board[e.from]=h.NONE,e.flags&u.EP_CAPTURE&&(this.turn===a.BLACK?this.board[e.to-16]=h.NONE:this.board[e.to+16]=h.NONE),e.flags&u.PROMOTION&&(this.board[e.to]=e.promotionPiece),e.movedPiece.type===v.KING){if(this.kings[e.movedPiece.color]=e.to,e.flags&u.KSIDE_CASTLE){var i=e.to-1,r=e.to+1;this.board[i]=this.board[r],this.board[r]=h.NONE}else if(e.flags&u.QSIDE_CASTLE){var o=e.to+1,s=e.to-2;this.board[o]=this.board[s],this.board[s]=h.NONE}this.castlingEligibility[t]=0}this.castlingEligibility[t]&&(t===a.WHITE?112===e.from&&this.castlingEligibility[t]&u.QSIDE_CASTLE?this.castlingEligibility[t]^=u.QSIDE_CASTLE:119===e.from&&this.castlingEligibility[t]&u.KSIDE_CASTLE&&(this.castlingEligibility[t]^=u.KSIDE_CASTLE):0===e.from&&this.castlingEligibility[t]&u.QSIDE_CASTLE?this.castlingEligibility[t]^=u.QSIDE_CASTLE:7===e.from&&this.castlingEligibility[t]&u.KSIDE_CASTLE&&(this.castlingEligibility[t]^=u.KSIDE_CASTLE)),this.castlingEligibility[n]&&(n===a.WHITE?112===e.from&&this.castlingEligibility[n]&u.QSIDE_CASTLE?this.castlingEligibility[n]^=u.QSIDE_CASTLE:119===e.from&&this.castlingEligibility[n]&u.KSIDE_CASTLE&&(this.castlingEligibility[n]^=u.KSIDE_CASTLE):0===e.from&&this.castlingEligibility[n]&u.QSIDE_CASTLE?this.castlingEligibility[n]^=u.QSIDE_CASTLE:7===e.from&&this.castlingEligibility[n]&u.KSIDE_CASTLE&&(this.castlingEligibility[n]^=u.KSIDE_CASTLE)),e.flags&u.BIG_PAWN?this.turn===a.BLACK?this.enPassantSquare=e.to-16:this.enPassantSquare=e.to+16:this.enPassantSquare=-1,e.movedPiece.type===v.PAWN||e.flags&(u.CAPTURE|u.EP_CAPTURE)?this.halfMoves=0:this.halfMoves++,this.turn===a.BLACK&&this.moveNumber++,this.plyCount=this.plyCount+1,this.turn=this.turn===a.WHITE?a.BLACK:a.WHITE}},{key:"undoCurrentMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{updatePositionCount:!0};if(this.selectedMoveHistoryIndex<0)return!1;var t=this.moveHistory[this.selectedMoveHistoryIndex];this.moveHistory.length=this.selectedMoveHistoryIndex,this.selectedMoveHistoryIndex--;var n=this._applyUndoMove(t);if(e.updatePositionCount){var i=this.toFen({omitExtras:!0});this.positionCount.set(i,this.positionCount.get(i)-1),0===this.positionCount.get(i)&&this.positionCount.delete(i)}return n}},{key:"_applyUndoMove",value:function(e){var t,n,r=e.move;this.castlingEligibility=(t={},Object(i.a)(t,a.WHITE,e.castlingEligibility[a.WHITE]),Object(i.a)(t,a.BLACK,e.castlingEligibility[a.BLACK]),t),this.kings=(n={},Object(i.a)(n,a.WHITE,e.kings[a.WHITE]),Object(i.a)(n,a.BLACK,e.kings[a.BLACK]),n),this.enPassantSquare=e.enPassantSquare,this.halfMoves=e.halfMoves,this.moveNumber=e.moveNumber,this.plyCount=e.plyCount-1,this.timeTakenToMove=e.timeTakenToMove,this.turn=e.turn;var o,s,c=this.turn;if(this.board[r.from]=h.forSymbol(r.movedPiece),this.board[r.to]=h.NONE,r.flags&u.CAPTURE)this.board[r.to]=r.capturedPiece;else if(r.flags&u.EP_CAPTURE){var l;l=c===a.BLACK?r.to-16:r.to+16,this.board[l]=r.capturedPiece}r.flags&(u.KSIDE_CASTLE|u.QSIDE_CASTLE)&&(r.flags&u.KSIDE_CASTLE?(o=r.to+1,s=r.to-1):r.flags&u.QSIDE_CASTLE&&(o=r.to-2,s=r.to+1),this.board[o]=this.board[s],this.board[s]=h.NONE);return r}},{key:"makeMoveFromSan",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{comment:null,timeTakenToMove:null,isPuzzleSolution:null},i=l.createFromSan(e,this);return i?(this.eventLog.add("makeMoveFromSan(".concat(e,", ...) --\x3e ").concat(i.san)),this.makeMove(i,t,n)):(this.eventLog.add("makeMoveFromSan(".concat(e,", ...) --\x3e invalid move")),!1)}},{key:"makeMoveFromAlgebraic",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v.QUEEN,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{comment:null,timeTakenToMove:null,isPuzzleSolution:null},o=l.createFromAlgebraic(e,t,this,i);return o?(this.eventLog.add("makeMoveFromAlgebraic(".concat(e,", ").concat(t,", ...) --\x3e ").concat(o.san)),this.makeMove(o,n,r)):(this.eventLog.add("makeMoveFromAlgebraic(".concat(e,", ").concat(t,", ...) --\x3e invalid move")),!1)}},{key:"_selectMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldLog:!1};return t.shouldLog&&this.eventLog.add("_selectMove(".concat(e)),this.selectedMoveHistoryIndex===e||!(e<-1||e>this.moveHistory.length-1)&&this.replayToPlyNum(e+1)}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldLog:!0};return e.shouldLog&&this.eventLog.add("next()"),this._selectMove(this.selectedMoveHistoryIndex+1)}},{key:"prev",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldLog:!0};return e.shouldLog&&this.eventLog.add("prev()"),this._selectMove(this.selectedMoveHistoryIndex-1)}},{key:"makeMove",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(i=Object.assign({},{comment:null,timeTakenToMove:null,isPuzzleSolution:null},i),(r=Object.assign({},{updatePositionCount:!0,isUserMove:!0},r)).isUserMove){if(this.selectedMoveHistoryIndex+1!==this.moveHistory.length){var o=this.moveHistory[this.selectedMoveHistoryIndex+1];if(o.move.san===t.san||t.isWildcard)return this.next({shouldLog:r.isUserMove}),this.moveHistory[this.selectedMoveHistoryIndex];for(var a=0;a<o.childVariations.length;a++)if(!o.childVariations[a].isContinuation&&(o.childVariations[a].moveHistory[0].move.san===t.san||o.childVariations[a].moveHistory[0].move.isWildcard))return!!n.descendIntoVariation(a)&&n.currentVariation.moveHistory[0]}if(this.moveHistory[this.selectedMoveHistoryIndex]&&this.moveHistory[this.selectedMoveHistoryIndex].childVariations.length>0)for(var s=this.moveHistory[this.selectedMoveHistoryIndex].childVariations,c=0;c<s.length;c++)if(s[c].isContinuation&&(s[c].moveHistory[0].move.san===t.san||s[c].moveHistory[0].move.isWildcard))return!!n.descendIntoContinuation(c)&&n.currentVariation.moveHistory[0].move;if(this.selectedMoveHistoryIndex+1!==this.moveHistory.length){var u=this.moveHistory[this.selectedMoveHistoryIndex+1],l=e.createFromParentVariation(this,{skipUndoingCurrentMove:!0});return u.childVariations.push(l),l.makeMove(t,n,i,r),n.currentVariation=l,u}}var h=new d({move:t,castlingEligibility:this.castlingEligibility,kings:this.kings,turn:this.turn,enPassantSquare:this.enPassantSquare,moveNumber:this.moveNumber,halfMoves:this.halfMoves,plyCount:this.plyCount+1,metadata:i});if(this.selectedMoveHistoryIndex++,this.moveHistory.splice(this.selectedMoveHistoryIndex,0,h),this._applyMove(t),r.updatePositionCount){var v=this.toFen({omitExtras:!0});this.positionCount.has(v)?this.positionCount.set(v,this.positionCount.get(v)+1):this.positionCount.set(v,1)}return h}},{key:"replayToPlyNum",value:function(e){if((e-=1)>this.selectedMoveHistoryIndex){for(this.selectedMoveHistoryIndex++;this.selectedMoveHistoryIndex<=e;this.selectedMoveHistoryIndex++){var t=this.moveHistory[this.selectedMoveHistoryIndex].move;this._applyMove(t)}this.selectedMoveHistoryIndex--}else if(e<this.selectedMoveHistoryIndex)for(;e<this.selectedMoveHistoryIndex;this.selectedMoveHistoryIndex--){var n=this.moveHistory[this.selectedMoveHistoryIndex];this._applyUndoMove(n)}return this.selectedMoveHistoryIndex>-1&&this.selectedMoveHistoryIndex<this.moveHistory.length?this.moveHistory[this.selectedMoveHistoryIndex]:null}},{key:"_addMove",value:function(t,n,i,r,o,s){var c=i===u.EP_CAPTURE?this.board[n+(s===a.BLACK?16:-16)]:this.board[n],d={from:t,to:n,movedPiece:this.board[t],capturedPiece:c,flags:i,boardVariation:o?this:void 0};this.board[t].type!==v.PAWN||0!==e._rank(n)&&7!==e._rank(n)?r.push(new l(d)):(this.turn===a.WHITE?h.WHITE_PROMOTION_PIECES:h.BLACK_PROMOTION_PIECES).forEach((function(e){d.promotionPiece=e,r.push(new l(d))}))}},{key:"_generateMoves",value:function(){var t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r=Object.assign({},{onlyForSquare:null,calculateSan:!1,onlyLegalMoves:!0},r);var o=this.turn,s=this.turn===a.WHITE?a.BLACK:a.WHITE,c=(t={},Object(i.a)(t,a.BLACK,1),Object(i.a)(t,a.WHITE,6),t),d=[],g=l.SQUARES.a8,f=l.SQUARES.h1;if(r.onlyForSquare){if(!(r.onlyForSquare in l.SQUARES))return[];g=f=l.SQUARES[r.onlyForSquare]}for(var b=g;b<=f;b++)if(136&b)b+=7;else{var p=this.board[b];if(p!==h.NONE&&p.color===o){var m=void 0;if(p.type===v.PAWN){m=b+l.PAWN_OFFSETS[o][0],this.board[m]===h.NONE&&(this._addMove(b,m,u.NORMAL,d,r.calculateSan),m=b+l.PAWN_OFFSETS[o][1],c[o]===e._rank(b)&&this.board[m]===h.NONE&&this._addMove(b,m,u.BIG_PAWN,d,r.calculateSan));for(var y=2;y<4;y++)136&(m=b+l.PAWN_OFFSETS[o][y])||(this.board[m]!==h.NONE&&this.board[m].color===s?this._addMove(b,m,u.CAPTURE,d,r.calculateSan):m===this.enPassantSquare&&this._addMove(b,this.enPassantSquare,u.EP_CAPTURE,d,r.calculateSan,s))}else for(var O=0,S=l.PIECE_OFFSETS[p.type].length;O<S;O++){var E=l.PIECE_OFFSETS[p.type][O];for(m=b;!(136&(m+=E));){if(this.board[m]!==h.NONE){if(this.board[m].color===o)break;this._addMove(b,m,u.CAPTURE,d,r.calculateSan);break}if(this._addMove(b,m,u.NORMAL,d,r.calculateSan),p.type===v.KNIGHT||p.type===v.KING)break}}}}if(!r.onlyForSquare||f===this.kings[o]){if(this.castlingEligibility[o]&u.KSIDE_CASTLE){var j=this.kings[o],k=j+2;this.board[j+1]!==h.NONE||this.board[k]!==h.NONE||this.isAttacked(s,this.kings[o])||this.isAttacked(s,j+1)||this.isAttacked(s,k)||this._addMove(this.kings[o],k,u.KSIDE_CASTLE,d,r.calculateSan)}if(this.castlingEligibility[o]&u.QSIDE_CASTLE){var I=this.kings[o],x=I-2;this.board[I-1]!==h.NONE||this.board[I-2]!==h.NONE||this.board[I-3]!==h.NONE||this.isAttacked(s,this.kings[o])||this.isAttacked(s,I-1)||this.isAttacked(s,x)||this._addMove(this.kings[o],x,u.QSIDE_CASTLE,d,r.calculateSan)}}if(!r.onlyLegalMoves)return d;var P=[];if(d.length>0){var C=this.moveHistory.slice(this.selectedMoveHistoryIndex+1);d.forEach((function(e){n.makeMove(e,null,null,{updatePositionCount:!1,isUserMove:!1}),n.isKingAttacked(o)||P.push(e),n.undoCurrentMove({updatePositionCount:!1})})),this.moveHistory=this.moveHistory.concat(C)}return P}},{key:"getDisambiguator",value:function(t){for(var n=this._generateMoves(),i=t.from,r=t.to,o=t.movedPiece,a=0,s=0,c=0,u=0,l=n.length;u<l;u++){var d=n[u].from,h=n[u].to;o===n[u].movedPiece&&i!==d&&r===h&&(a++,e._rank(i)===e._rank(d)&&s++,e._file(i)===e._file(d)&&c++)}return a>0?s>0&&c>0?e._algebraic(i):c>0?e._algebraic(i).charAt(1):e._algebraic(i).charAt(0):""}},{key:"isAttacked",value:function(e,t){for(var n=l.SQUARES.a8;n<=l.SQUARES.h1;n++)if(136&n)n+=7;else if(this.board[n]!==h.NONE&&this.board[n].color===e){var i=n-t,r=i+119,o=this.board[n];if(l.ATTACKS[r]&1<<l.SHIFTS[o.type]){if(o.type===v.PAWN){if(i>0){if(o.color===a.WHITE)return!0}else if(o.color===a.BLACK)return!0;continue}if(o.type===v.KNIGHT||o.type===v.KING)return!0;for(var s=l.RAYS[r],c=n+s,u=!1;c!==t;){if(this.board[c]!==h.NONE){u=!0;break}c+=s}if(!u)return!0}}return!1}},{key:"isKingAttacked",value:function(e){return this.isAttacked(e===a.WHITE?a.BLACK:a.WHITE,this.kings[e])}},{key:"isCheck",value:function(){return this.isKingAttacked(this.turn)}},{key:"isCheckmate",value:function(){return this.isCheck()&&0===this._generateMoves().length}},{key:"isStalemate",value:function(){return!this.isCheck()&&0===this._generateMoves().length}},{key:"isDraw",value:function(){return this.halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}},{key:"isInsufficientMaterial",value:function(){for(var e={},t=0,n=[],i=0,r=l.SQUARES.a8;r<=l.SQUARES.h1;r++)if(i=(i+1)%2,136&r)r+=7;else{var o=this.board[r];o.type!==v.NONE&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===v.BISHOP&&n.push(i),t++)}if(2===t)return!0;if(3===t&&(1===e[v.BISHOP]||1===e[v.KNIGHT]))return!0;if(t===e[v.BISHOP]+2){for(var a=n.length,s=0,c=0;c<a;c++)s+=n[c];if(0===s||s===a)return!0}return!1}},{key:"isThreefoldRepetition",value:function(){return Array.from(this.positionCount.values()).some((function(e){return e>=3}))}},{key:"isGameOver",value:function(){return this.halfMoves>=100||this.isCheckmate()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}}],[{key:"copyFrom",value:function(t){var n,r,o=Object.create(e.prototype);return o.id=e.id++,o.parentVariation=t.parentVariation,o.parentLastMoveIndex=t.parentLastMoveIndex,o.turn=t.turn,o.enPassantSquare=t.enPassantSquare,o.moveNumber=t.moveNumber,o.plyCount=t.plyCount,o.halfMoves=t.halfMoves,o.board=t.board.slice(0),o.castlingEligibility=(n={},Object(i.a)(n,a.WHITE,t.castlingEligibility[a.WHITE]),Object(i.a)(n,a.BLACK,t.castlingEligibility[a.BLACK]),n),o.kings=(r={},Object(i.a)(r,a.WHITE,t.kings[a.WHITE]),Object(i.a)(r,a.BLACK,t.kings[a.BLACK]),r),o.moveHistory=t.moveHistory.slice(0),o.selectedMoveHistoryIndex=t.selectedMoveHistoryIndex,o.positionCount=new Map(t.positionCount),o.intraMoveAnnotationSlots=t.intraMoveAnnotationSlots.slice(0),o.eventLog=t.eventLog,o}},{key:"createFromParentVariation",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=Object.assign({},{isContinuation:!1,resetIdCounter:!1,skipUndoingCurrentMove:!1},n);var i=e.copyFrom(t);return n.skipUndoingCurrentMove||n.isContinuation||i.undoCurrentMove(),n.resetIdCounter&&(e.id=0),i.id=e.id++,i.parentLastMoveIndex=t.selectedMoveHistoryIndex,i.parentVariation=t,i.isContinuation=n.isContinuation,i.moveHistory=[],i.selectedMoveHistoryIndex=-1,i.intraMoveAnnotationSlots=[],i}},{key:"createFromFen",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s,i=new e(n);return!!i.loadFen(t)&&i}},{key:"_file",value:function(e){return 15&e}},{key:"_rank",value:function(e){return e>>4}},{key:"_algebraic",value:function(t){var n=e._file(t),i=e._rank(t);return"abcdefgh".substring(n,n+1)+"87654321".substring(i,i+1)}}]),e}();g.id=0,t.default=g},35:function(e,t,n){"use strict";n.r(t),function(e){var t=n(4),i=n(5),r=function(){function e(){Object(t.a)(this,e),this._events=[],this._lastTimerSnapshot=Date.now(),this._events.push({timer:this._lastTimerSnapshot,delta:null,event:"Event Log initialized."})}return Object(i.a)(e,[{key:"add",value:function(e){var t=this._updateEventTimer();this._events.push({timer:this._lastTimerSnapshot,delta:t,event:e})}},{key:"_updateEventTimer",value:function(){var e=this._lastTimerSnapshot;return this._lastTimerSnapshot=Date.now(),this._lastTimerSnapshot-e}}]),e}();e.exports=r}.call(this,n(10)(e))},36:function(e,t,n){"use strict";n.r(t),function(e){var t,i=n(2),r=n(4),o=n(5),a=n(11),s=n(13),c=function(){function e(t){Object(r.a)(this,e),this.type=t.type,this.color=t.color,this.symbol=this.color===a.WHITE?this.type.toUpperCase():this.type,Object.freeze(this)}return Object(o.a)(e,[{key:"toString",value:function(){return this.symbol}},{key:"inspect",value:function(){return this.toString()}}],[{key:"forSymbol",value:function(t){return e.LOOKUP[t]}}]),e}();c.WHITE_PAWN=new c({color:a.WHITE,type:s.PAWN}),c.WHITE_KNIGHT=new c({color:a.WHITE,type:s.KNIGHT}),c.WHITE_BISHOP=new c({color:a.WHITE,type:s.BISHOP}),c.WHITE_ROOK=new c({color:a.WHITE,type:s.ROOK}),c.WHITE_QUEEN=new c({color:a.WHITE,type:s.QUEEN}),c.WHITE_KING=new c({color:a.WHITE,type:s.KING}),c.BLACK_PAWN=new c({color:a.BLACK,type:s.PAWN}),c.BLACK_KNIGHT=new c({color:a.BLACK,type:s.KNIGHT}),c.BLACK_BISHOP=new c({color:a.BLACK,type:s.BISHOP}),c.BLACK_ROOK=new c({color:a.BLACK,type:s.ROOK}),c.BLACK_QUEEN=new c({color:a.BLACK,type:s.QUEEN}),c.BLACK_KING=new c({color:a.BLACK,type:s.KING}),c.NONE=new c({color:a.NONE,type:s.NONE}),c.LOOKUP=(t={},Object(i.a)(t,c.WHITE_PAWN,c.WHITE_PAWN),Object(i.a)(t,c.WHITE_KNIGHT,c.WHITE_KNIGHT),Object(i.a)(t,c.WHITE_BISHOP,c.WHITE_BISHOP),Object(i.a)(t,c.WHITE_ROOK,c.WHITE_ROOK),Object(i.a)(t,c.WHITE_QUEEN,c.WHITE_QUEEN),Object(i.a)(t,c.WHITE_KING,c.WHITE_KING),Object(i.a)(t,c.BLACK_PAWN,c.BLACK_PAWN),Object(i.a)(t,c.BLACK_KNIGHT,c.BLACK_KNIGHT),Object(i.a)(t,c.BLACK_BISHOP,c.BLACK_BISHOP),Object(i.a)(t,c.BLACK_ROOK,c.BLACK_ROOK),Object(i.a)(t,c.BLACK_QUEEN,c.BLACK_QUEEN),Object(i.a)(t,c.BLACK_KING,c.BLACK_KING),Object(i.a)(t,c.NONE,c.NONE),t),c.WHITE_PROMOTION_PIECES=[c.WHITE_QUEEN,c.WHITE_ROOK,c.WHITE_BISHOP,c.WHITE_KNIGHT],c.BLACK_PROMOTION_PIECES=[c.BLACK_QUEEN,c.BLACK_ROOK,c.BLACK_BISHOP,c.BLACK_KNIGHT],e.exports=c}.call(this,n(10)(e))},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t),function(e){var t=n(4),i=n(5),r=n(34),o=(n(11),n(25)),a=(n(15),n(62)),s=n(26),c=n(13),u=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";Object(t.a)(this,e);var i=new a(n);this.games=[i],this.currentGame=i,this.currentGameNum=0,this.lastTimerSnapshot=-1,this.replayLog=[]}return Object(i.a)(e,[{key:"toString",value:function(){return"".concat(this.games.length," game").concat(this.games.length>1?"s":""," loaded.  Game #").concat(this.currentGameNum+1," selected:\n\n")+this.currentGame.toString()}},{key:"addGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a;this.games.push(e)}},{key:"selectGame",value:function(e){return!(e<0||e>=this.games.length)&&(this.currentGame=this.games[e],this.currentGameNum=e,!0)}},{key:"toPgn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({},{maxWidth:0,newlineChar:"\n",showMoveCursor:!1,showHeaders:!0},e),this.currentGame.toPgn(e)}},{key:"loadPgn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},{newlineChar:"\r?\n"},t),e=e.replace(new RegExp(t.newlineChar.replace(/\\/g,"\\"),"g"),"\n");for(var n=this._parsePgnGames(e),i=0;i<n.length;i++){var r=this._parsePgnGame(n[i].headerText,n[i].gameText);if(!r)return!1;this.addGame(r)}return this.selectGame(this.games.length-1),!0}},{key:"_parsePgnGames",value:function(e){var t,n,i,r,o,a,s,c=[],u="",l=/\s*(\[\s*\w+\s*"[^"]*"\s*\]\s*)+/;if(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[\u00A0\u180E\u2000-\u200A\u202F\u205F\u3000]/g," ")).replace(/\u00BD/g,"1/2")).replace(/[\u2010-\u2015]/g,"-")).replace(/\u2024/g,".")).replace(/[\u2025-\u2026]/g,"...")).replace(/\\"/g,"'")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/(^|\n)%.*(\n|$)/g,"\n"),l.exec(e))for(;t=l.exec(e);)i=t[0],o=(r=e.indexOf(i))+i.length,n?(s=(a=(u+=e.slice(0,r)).lastIndexOf("{"))<0||u.lastIndexOf("}")>a)?(c.push({headerText:n,gameText:u}),u=""):u+=i:s=!0,s&&(n=i),e=e.slice(o);else c.push({headerText:"",gameText:e});return n&&(u+=e,c.push({headerText:n,gameText:u})),c}},{key:"_parsePgnGame",value:function(e,t){var n=["1-0","0-1","1/2-1/2","*"];function i(e,t){var n=e.currentVariation.moveHistory.length-1,i=r.createFromParentVariation(e.currentVariation,{isContinuation:t});e.boardVariations.push(i),e.currentVariation.moveHistory[n].childVariations.push(i),e.currentVariation=i}function c(e){e.currentVariation=e.currentVariation.parentVariation}for(var u,l,d=e.split("\n"),h=o.DEFAULT_POSITION_FULL,v=[],g=0;g<d.length;g++){var f=d[g].trim();u=f.replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),l=f.replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),u.length>0&&(v.push(u),v.push(l),"FEN"===u.toUpperCase()&&(h=l))}var b,p,m,y,O=new a(h,v),S=t;for(p=0;p<S.length;p++)switch(S.charAt(p)){case" ":case"\b":case"\f":case"\n":case"\r":case"\t":case";":break;case"{":for(m=p;"}"!=S.charAt(m);)m++;y=S.substring(p,m+1),O.currentVariation.intraMoveAnnotationSlots[O.currentVariation.selectedMoveHistoryIndex+1]?O.currentVariation.intraMoveAnnotationSlots[O.currentVariation.selectedMoveHistoryIndex+1].push(y):O.currentVariation.intraMoveAnnotationSlots[O.currentVariation.selectedMoveHistoryIndex+1]=[y],b&&(b.metadata.comment=y),p=m;break;case"(":var E=!1;"*"===S.charAt(p+1)&&(E=!0,p++),i(O,E);break;case")":c(O);break;case"$":for(m=p+1;" "!=S.charAt(m);)m++;var j=S.substring(p,m);O.currentVariation.intraMoveAnnotationSlots[O.currentVariation.selectedMoveHistoryIndex+1]?O.currentVariation.intraMoveAnnotationSlots[O.currentVariation.selectedMoveHistoryIndex+1].push(j):O.currentVariation.intraMoveAnnotationSlots[O.currentVariation.selectedMoveHistoryIndex+1]=[j],p=m;break;default:for(var k=void 0,I=0;I<n.length;I++)if(S.indexOf(n[I],p)==p){p=m=O.currentVariation===O.currentVariation[0]?S.length:p+n[I].length;break}if(p==S.length)break;var x=O.currentVariation.moveNumber.toString();if(S.indexOf(x,p)==p)for(p+=x.length;-1!=" .\n\r".indexOf(S.charAt(p));)p++;if(S.substr(p,2)===s.WILDCARD_MOVE){var P=s.createWildcardMove(O.currentVariation);b=O.makeMove(P),m=p+2}else if("&lt;&gt;"===S.substr(p,8)){var C=s.createWildcardMove(O.currentVariation);b=O.makeMove(C),m=p+8}else(m=p+S.substr(p).search(/[\s${;!?()]/))<p&&(m=S.length),k=S.substring(p,m),b=O.makeMoveFromSan(k);if(!b)throw new Error('error when trying to apply the parsed PGN move "'.concat(k,'"'));y=null,p=" "===S.charAt(m)?m:m-1}if(O.currentVariation!==O.boardVariations[0])for(;O.currentVariation!==O.boardVariations[0];)c(O);return O}},{key:"clear",value:function(){var e=new a;this.currentGameNum=0,this.currentGame=e,this.games[this.currentGameNum]=e}},{key:"reset",value:function(){var e=new a(o.DEFAULT_POSITION_FULL);this.currentGameNum=0,this.currentGame=e,this.games[this.currentGameNum]=e}},{key:"whoseTurn",value:function(){return this.currentGame.currentVariation.turn}},{key:"ascendFromCurrentContinuation",value:function(){return this.currentGame.ascendFromCurrentContinuation()}},{key:"ascendFromCurrentVariation",value:function(){return this.currentGame.ascendFromCurrentVariation()}},{key:"createContinuationFromSan",value:function(e){return this.currentGame.createContinuationFromSan(e)}},{key:"createVariationFromSan",value:function(e){return this.currentGame.createVariationFromSan(e)}},{key:"descendIntoContinuation",value:function(e){return this.currentGame.descendIntoContinuation(e)}},{key:"descendIntoVariation",value:function(e){return this.currentGame.descendIntoVariation(e)}},{key:"get",value:function(e){return this.currentGame.get(e)}},{key:"header",value:function(){return this.currentGame.header}},{key:"history",value:function(){return this.currentGame.history()}},{key:"isCheck",value:function(){return this.currentGame.isCheck()}},{key:"isCheckmate",value:function(){return this.currentGame.isCheckmate()}},{key:"isDraw",value:function(){return this.currentGame.isDraw()}},{key:"isGameOver",value:function(){return this.currentGame.isGameOver()}},{key:"isInsufficientMaterial",value:function(){return this.currentGame.isInsufficientMaterial()}},{key:"isStalemate",value:function(){return this.currentGame.isStalemate()}},{key:"isThreefoldRepetition",value:function(){return this.currentGame.isThreefoldRepetition()}},{key:"loadFen",value:function(e){return this.currentGame.loadFen(e)}},{key:"makeMove",value:function(e){return this.currentGame.makeMove(e)}},{key:"makeMoveFromSan",value:function(e){return this.currentGame.makeMoveFromSan(e)}},{key:"makeMoveFromAlgebraic",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.QUEEN;return this.currentGame.makeMoveFromAlgebraic(e,t,n)}},{key:"moves",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onlyAlgebraicSquares:!1,onlyDestinationSquares:!1,onlyForSquare:void 0};return this.currentGame.moves(e)}},{key:"next",value:function(){return this.currentGame.next()}},{key:"prev",value:function(){return this.currentGame.prev()}},{key:"put",value:function(e,t){var n=this.currentGame.put(e,t);return n&&this.currentGame._updateSetup(),n}},{key:"remove",value:function(e){return this.currentGame.remove(e)}},{key:"rewindToBeginning",value:function(){return this.currentGame.rewindToBeginning()}},{key:"selectMove",value:function(e){return this.currentGame._selectMove(e,{shouldLog:!0})}},{key:"toFen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{omitExtras:!1};return this.currentGame.currentVariation.toFen(e)}},{key:"validateFen",value:function(e){return o.validate(e)}}]),e}();e.exports=u}.call(this,n(10)(e))},61:function(e,t,n){"use strict";n.r(t),function(e){var t=n(2),i=n(4),r=n(5),o=n(11),a=function(){function e(n){var r,a;Object(i.a)(this,e),this.move=n.move,this.castlingEligibility=(r={},Object(t.a)(r,o.WHITE,n.castlingEligibility[o.WHITE]),Object(t.a)(r,o.BLACK,n.castlingEligibility[o.BLACK]),r),this.kings=(a={},Object(t.a)(a,o.WHITE,n.kings[o.WHITE]),Object(t.a)(a,o.BLACK,n.kings[o.BLACK]),a),this.turn=n.turn,this.enPassantSquare=n.enPassantSquare,this.moveNumber=n.moveNumber,this.halfMoves=n.halfMoves,this.plyCount=n.plyCount,this.metadata=n.metadata,this.childVariations=[]}return Object(r.a)(e,[{key:"toString",value:function(){return this.move.algebraic}},{key:"inspect",value:function(){return this.toString()}}]),e}();e.exports=a}.call(this,n(10)(e))},62:function(e,t,n){"use strict";n.r(t),function(e){var t=n(4),i=n(5),r=n(34),o=n(11),a=n(35),s=n(25),c=(n(15),n(63)),u=n(26),l=n(13),d=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.DEFAULT_POSITION_FULL,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(t.a)(this,e),this.eventLog=new a,this.header=new c(i),n?(this.currentVariation=r.createFromFen(n,this.eventLog),n!==s.DEFAULT_POSITION_FULL&&(this.header.set("SetUp","1"),this.header.set("FEN",n))):this.currentVariation=new r(this.eventLog),this.boardVariations=[this.currentVariation]}return Object(i.a)(e,[{key:"toString",value:function(){for(var e=this.toPgn({maxWidth:0,newlineChar:"\n",showMoveCursor:!0,showHeaders:!1}),t=Math.max(80,Math.floor(e.length/4)),n=[],i=0;i<e.length;){var r=i;for(i+=t;" "!=e.charAt(i)&&i<e.length;)i++;n.push(e.substring(r,i))}for(var a="",s=this.currentVariation.toString().split("\n"),c=" : (variations: ".concat(this.boardVariations.length,", move history length: ").concat(this.currentVariation.moveHistory.length,", selected index: ").concat(this.currentVariation.selectedMoveHistoryIndex,")"),u=0;u<s.length;u++)a+=s[u],this.currentVariation.turn===o.WHITE?9==u&&(a+=c):0==u&&(a+=c),u>=2&&n.length>u-2&&(a+="  "+n[u-2]),7==u&&(a+="  "+this.currentVariation.toFen()),a+="\n";return a}},{key:"loadFen",value:function(e){var t=r.createFromFen(e);return!!t&&(this.currentVariation=t,this._updateSetup(),this.boardVariations=[t],!0)}},{key:"makeMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=Object.assign({},{comment:null,timeTakenToMove:null,isPuzzleSolution:null},t),this.currentVariation.makeMove(e,this,t)}},{key:"makeMoveFromSan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=Object.assign({},{comment:null,timeTakenToMove:null,isPuzzleSolution:null},t),this.currentVariation.makeMoveFromSan(e,this,t)}},{key:"makeMoveFromAlgebraic",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.QUEEN,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=Object.assign({},{comment:null,timeTakenToMove:null,isPuzzleSolution:null},i),this.currentVariation.makeMoveFromAlgebraic(e,t,this,n,i)}},{key:"toPgn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if((e=Object.assign({},{maxWidth:0,newlineChar:"\n",showMoveCursor:!1,showHeaders:!0},e)).showHeaders){for(var n=0;n<this.header.length();n++)t.push("[".concat(this.header.getKeyAtPosition(n),' "').concat(this.header.getValueAtPosition(n),'"]').concat(e.newlineChar));this.header.length()>0&&t.push(e.newlineChar)}var i=this.boardVariations[0],r=a(i,1,this.currentVariation);function a(t,n,i){var r=[],s="",c=!1,l=!1;t.intraMoveAnnotationSlots[0]&&(r=r.concat(t.intraMoveAnnotationSlots[0]));for(var d=0;d<t.moveHistory.length;d++){var h=t.moveHistory[d];if((c=0==d)&&h.move.movedPiece.color===o.BLACK?(r.push(n+"..."),n++):!c&&!l||h.move.movedPiece.color!==o.BLACK||t.isContinuation?h.move.movedPiece.color===o.WHITE&&(r.push(n+"."),n++):r.push(n-1+"..."),r.push(h.move.isWildcard?u.WILDCARD_MOVE:h.move.san),e.showMoveCursor)t===i&&d===i.selectedMoveHistoryIndex&&r.push(" ^");if(t.intraMoveAnnotationSlots[d+1]&&(r=r.concat(t.intraMoveAnnotationSlots[d+1])),l=!1,t.moveHistory[d].childVariations.length>0){t.intraMoveAnnotationSlots[d+1]&&r.concat(t.intraMoveAnnotationSlots[d+1]);for(var v=0;v<t.moveHistory[d].childVariations.length;v++){var g=t.moveHistory[d].childVariations[v],f=a(g,n-(g.isContinuation?0:1),i);if(0==f.length)r.push("()");else for(var b=0;b<f.length;b++)s=f[b],0==b&&(s="("+(g.isContinuation?"* ":"")+s),b==f.length-1&&(s+=")"),r.push(s);l=!0}}}return r}var s=this.header.get("Result");if(s&&r.push(s),0===e.maxWidth)return t.join("")+r.join(" ");for(var c=0,l=0;l<r.length;l++)c+r[l].length>e.maxWidth&&0!==l?(" "===t[t.length-1]&&t.pop(),t.push(e.newlineChar),c=0):0!==l&&(t.push(" "),c++),t.push(r[l]),c+=r[l].length;return t.join("")}},{key:"createContinuationFromSan",value:function(e){return this.eventLog.add("createContinuationFromSan(".concat(e,")")),this.createVariationFromSan(e,!0,{shouldLog:!1})}},{key:"createVariationFromSan",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{shouldLog:!0};if(n.shouldLog&&this.eventLog.add("createVariationFromSan(".concat(e,", ").concat(t,")")),null===e)return!1;if(t){if(this.currentVariation.selectedMoveHistoryIndex+1<this.currentVariation.moveHistory.length){var i=this.currentVariation.moveHistory[this.currentVariation.selectedMoveHistoryIndex+1].move;if(i.san===e)return!1;if(e===u.WILDCARD_MOVE)return!1}}else{var o=this.currentVariation.moveHistory[this.currentVariation.selectedMoveHistoryIndex].move;if(o.san===e)return!1;if(e===u.WILDCARD_MOVE)return!1}var a=r.createFromParentVariation(this.currentVariation,{isContinuation:t});this.boardVariations.push(a),this.currentVariation.moveHistory[this.currentVariation.selectedMoveHistoryIndex].childVariations.push(a),this.currentVariation=a;var s=u.createFromSan(e,this.currentVariation);return s?(this.currentVariation.makeMove(s,this),!0):(this.currentVariation=this.currentVariation.parentVariation,this.currentVariation.moveHistory[this.currentVariation.selectedMoveHistoryIndex].childVariations.pop(),this.boardVariations.pop(),!1)}},{key:"history",value:function(){for(var e=[],t=this.currentVariation,n=t.selectedMoveHistoryIndex;n>=0;n--)e.push(t.moveHistory[n].move.isWildcard?u.WILDCARD_MOVE:t.moveHistory[n].move.san);var i=t.parentLastMoveIndex,r=t.isContinuation;for(t=t.parentVariation;null!=t;){var o=i;for(r||o--;o>=0;o--)e.push(t.moveHistory[o].isWildcard?u.WILDCARD_MOVE:t.moveHistory[o].move.san);i=t.parentLastMoveIndex,r=t.isContinuation,t=t.parentVariation}return e.reverse()}},{key:"ascendFromCurrentContinuation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldLog:!0};if(e.shouldLog&&this.eventLog.add("ascendFromCurrentContinuation()"),null===this.currentVariation.parentVariation)return!1;var t=this.currentVariation.parentLastMoveIndex-1;return this.currentVariation=this.currentVariation.parentVariation,this.currentVariation.selectedMoveIndex=t,this._selectMove(t)}},{key:"ascendFromCurrentVariation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldLog:!0};if(e.shouldLog&&this.eventLog.add("ascendFromCurrentVariation()"),null===this.currentVariation.parentVariation)return!1;var t=this.currentVariation.parentLastMoveIndex;return this.currentVariation=this.currentVariation.parentVariation,this.currentVariation.selectedMoveIndex=t,!0}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldLog:!0};return this.currentVariation.next(e)}},{key:"prev",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldLog:!0};return e.shouldLog&&this.eventLog.add("prev()"),0===this.currentVariation.selectedMoveHistoryIndex&&this.currentVariation.parentVariation?!!this.ascendFromCurrentContinuation({shouldLog:!1}):this._selectMove(this.currentVariation.selectedMoveHistoryIndex-1)}},{key:"rewindToBeginning",value:function(){for(this.eventLog.add("rewindToBeginning()");this.prev({shouldLog:!1}););}},{key:"replayToPlyNum",value:function(e){return this.currentVariation.replayToPlyNum(e)}},{key:"_updateSetup",value:function(){if(!(this.currentVariation.moveHistory.length>0)){var e=this.currentVariation.toFen();e!==s.DEFAULT_POSITION?(this.header.set("SetUp","1"),this.header.set("FEN",e)):(this.header.remove("SetUp"),this.header.remove("FEN"))}}},{key:"header",value:function(){return this.header}},{key:"descendIntoContinuation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.eventLog.add("descendIntoContinuation()"),this.currentVariation.moveHistory.length<=0)return!1;var t=this.currentVariation.moveHistory[this.currentVariation.selectedMoveHistoryIndex];return!(t.childVariations.length<=0)&&(!(e<0||e>t.childVariations.length-1)&&(!!t.childVariations[e].isContinuation&&(this.currentVariation=t.childVariations[e],this.currentVariation.selectedMoveHistoryIndex=0,this._selectMove(0))))}},{key:"descendIntoVariation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.eventLog.add("descendIntoVariation()"),this.currentVariation.moveHistory.length<=0)return!1;var t=this.currentVariation.moveHistory[this.currentVariation.selectedMoveHistoryIndex];return!(t.childVariations.length<=0)&&(!(e<0||e>t.childVariations.length-1)&&(!t.childVariations[e].isContinuation&&(this.currentVariation=t.childVariations[e],this.currentVariation.selectedMoveHistoryIndex=0,this._selectMove(0))))}},{key:"_selectMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldLog:!1};return this.currentVariation._selectMove(e,t)}},{key:"get",value:function(e){return this.currentVariation.get(e)}},{key:"isCheck",value:function(){return this.currentVariation.isCheck()}},{key:"isCheckmate",value:function(){return this.currentVariation.isCheckmate()}},{key:"isDraw",value:function(){return this.currentVariation.isDraw()}},{key:"isGameOver",value:function(){return this.currentVariation.isGameOver()}},{key:"isInsufficientMaterial",value:function(){return this.currentVariation.isInsufficientMaterial()}},{key:"isStalemate",value:function(){return this.currentVariation.isStalemate()}},{key:"isThreefoldRepetition",value:function(){return this.currentVariation.isThreefoldRepetition()}},{key:"moves",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onlyAlgebraicSquares:!1,onlyDestinationSquares:!1,onlyForSquare:void 0};return this.currentVariation.moves(e)}},{key:"put",value:function(e,t){return this.currentVariation.put(e,t)}},{key:"remove",value:function(e){var t=this.currentVariation.remove(e);return this._updateSetup(),t}},{key:"toFen",value:function(){return this.currentVariation.toFen()}}]),e}();e.exports=d}.call(this,n(10)(e))},63:function(e,t,n){"use strict";n.r(t),function(e){var t=n(4),i=n(5),r=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(t.a)(this,e),this._map={},this._keys=[],this.addAll(n)}return Object(i.a)(e,[{key:"addAll",value:function(e){for(var t=0;t<e.length;t+=2)this.set(e[t],e[t+1])}},{key:"clear",value:function(){this._map={},this._keys=[]}},{key:"get",value:function(e){return this._map[e]}},{key:"getKeyAtPosition",value:function(e){return this._keys[e]}},{key:"getValueAtPosition",value:function(e){return this._map[this._keys[e]]}},{key:"length",value:function(){return this._keys.length}},{key:"remove",value:function(e){if(e in this._map){var t=this._keys.indexOf(e);this._keys.splice(t,1),delete this._map[e]}}},{key:"set",value:function(e,t){e in this._map||this._keys.push(e),this._map[e]=t}},{key:"toString",value:function(){var e=this;return"{ "+this._keys.map((function(t){return"".concat(t,": ").concat(e._map[t])})).join(", ")+" }"}}]),e}();e.exports=r}.call(this,n(10)(e))},94:function(e,t,n){"use strict";n.r(t);var i=n(3),r=n.n(i),o=n(46),a=n.n(o),s=(n(58),n(59),n(1)),c=n(6),u=n(47),l=n.n(u),d=n(19),h=n(22),v=n(2),g="abcdefgh".split("");function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function b(e){return"string"===typeof e}function p(e){if(!function(e){var t,n;return!1!==f(e)&&(void 0===(t=e.constructor)||!1!==f(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}(e))return!1;for(var t in e)if(e.hasOwnProperty(t)&&(!b(i=t)||-1===i.search(/^[a-h][1-8]$/)||(!b(n=e[t])||-1===n.search(/^[bw][KQRNBP]$/))))return!1;var n,i;return!0}function m(e){var t=e.split("");return"w"===t[0]?t[1].toUpperCase():t[1].toLowerCase()}var y,O,S,E,j,k,I,x,P,C,M=function(e){if(!p(e))return!1;for(var t="",n=8,i=0;i<8;i++){for(var r=0;r<8;r++){var o=g[r]+n;e.hasOwnProperty(o)?t+=m(e[o]):t+="1"}7!==i&&(t+="/"),n-=1}return t=function(e){return e.replace(/11111111/g,"8").replace(/1111111/g,"7").replace(/111111/g,"6").replace(/11111/g,"5").replace(/1111/g,"4").replace(/111/g,"3").replace(/11/g,"2")}(t)},A=function(e){if(!function(e){if(!b(e))return!1;var t=(e=function(e){return e.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}(e=e.replace(/ .+$/,""))).split("/");if(8!==t.length)return!1;for(var n=0;n<8;n++)if(8!==t[n].length||-1!==t[n].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}(e))return!1;for(var t,n=(e=e.replace(/ .+$/,"")).split("/"),i={},r=8,o=0;o<8;o++){for(var a=n[o].split(""),s=0,c=0;c<a.length;c++){if(-1!==a[c].search(/[1-8]/))s+=parseInt(a[c],10);else i[g[s]+r]=(t=a[c]).toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase(),s+=1}r-=1}return i},N="BOARD_MOVE_UPDATE",T="BOARD_MOVE_UNDO",_="BOARD_FEN_UPDATE",H="BOARD_PGN_UPDATE",L=n(31),w=n(60),V="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",R=function(e){var t=e.pieceSquare,n=e.history,i=(n.length&&n[n.length-1].from,n.length&&n[n.length-1].to);return Object(s.a)(Object(v.a)({},t,{backgroundColor:"rgba(123,97,255,0.5)"}),n.length&&Object(v.a)({},i,{backgroundColor:"rgba(123,97,255,0.5)"}))},K=function(e,t){var n=Object(i.useState)(new L(V)),r=Object(c.a)(n,1)[0],o=Object(i.useState)(new w(V)),a=Object(c.a)(o,1)[0],u=Object(i.useState)(!1),l=Object(c.a)(u,2),g=l[0],f=l[1],b=Object(i.useState)({turn:r.turn()||"w",fen:"start",orientation:"white",pendingMove:void 0,dropSquareStyle:{},squareStyles:{},pieceSquare:"",square:"",history:[],boardPosition:{},pgn:"",undoMovesArray:[]}),p=Object(c.a)(b,2),m=p[0],y=p[1];Object(i.useEffect)((function(){console.log("FEN: ",Object.fromEntries(new URLSearchParams(window.location.search).entries()).fen),r&&Object.fromEntries(new URLSearchParams(window.location.search).entries()).fen&&(r.load(Object.fromEntries(new URLSearchParams(window.location.search).entries()).fen),a.loadFen(Object.fromEntries(new URLSearchParams(window.location.search).entries()).fen),y(Object(s.a)(Object(s.a)({},m),{},{fen:Object.fromEntries(new URLSearchParams(window.location.search).entries()).fen})))}),[r]),Object(i.useEffect)((function(){console.log("POSITION: ",m.boardPosition,r.in_check(),r.turn()),r.in_check()&&S(r.turn())}),[m.boardPosition]),Object(i.useEffect)((function(){console.log("UNDO MOVES: ",m.undoMovesArray)}),[m.undoMovesArray]),Object(i.useEffect)((function(){var n;e.channel&&(null===(n=e.channel)||void 0===n||n.on("ChannelMessage",(function(e){var n,i=(n=e.text,JSON.parse(n));switch(i.type){case N:E({sourceSquare:i.json.move.from,targetSquare:i.json.move.to});break;case _:console.log("PGNPRING_LOADINGFEN..."),r.load(i.json.fen),a.loadFen(i.json.fen),console.log("PGNPRINT_FENUPDATE: ",i.json.fen),y(Object(s.a)(Object(s.a)({},m),{},{fen:i.json.fen}));break;case H:console.log("PGNPRING_LOADINGPGN...",i),r.load_pgn(i.json.pgn),a.loadPgn(i.json.pgn),console.log("PGNPRINT_PGNUPDATE: ",i.json.pgn),y(Object(s.a)(Object(s.a)({},m),{},{pgn:i.json.pgn,fen:r.fen()}));break;case T:var o={chess:r,state:m,setState:y,undoArray:i.json.undoArray};t.undoMove(o);break;default:console.log("INVALID OPERATION")}})))}),[e.channel]),Object(i.useEffect)((function(){console.log("PGN: ",m.pgn)}),[m.pgn]);var O=function(){return f(!0)},S=function(e){var t=Object.keys(m.boardPosition).find((function(t){return m.boardPosition[t]==="".concat(e,"K")}));console.log("INCHECK: ",Object.keys(m.boardPosition).find((function(t){return m.boardPosition[t]==="".concat(e,"K")}))),y(Object(s.a)(Object(s.a)({},m),{},{squareStyles:Object(s.a)(Object(s.a)({},m.squareStyles),{},Object(v.a)({},t,{backgroundColor:"red"}))}))},E=function(e){for(var n=e.sourceSquare,i=e.targetSquare,o=(e.piece,r.move({from:n,to:i})),c=r.moves({verbose:!0}),u=0,l=c.length;u<l;u++)if(c[u].flags.includes("p")&&c[u].from===n)return y(Object(s.a)(Object(s.a)({},m),{},{pendingMove:{sourceSquare:n,targetSquare:i}})),void O();if(null!==o){console.log("ES6 MOVES: ",{move:a.makeMoveFromAlgebraic(n,i),moves:a.moves({onlyAlgebraicSquares:!0,onlyForSquare:n,onlyDestinationSquares:!0}),fen:a.toFen(),pgn:a.toPgn(),history:a.history(),game:a,header:a.header()}),a.makeMoveFromAlgebraic(n,i),y((function(e){var t=e.history,n=e.pieceSquare;return Object(s.a)(Object(s.a)({},m),{},{turn:r.turn(),fen:r.fen(),pgn:a.toPgn(),history:r.history({verbose:!0}),squareStyles:R({pieceSquare:n,history:t})})}));var d=[];c.forEach((function(e){r.move(e),d.push(r.fen()),r.undo()})),console.log("FENS: ",d),t.updateBoardPgn(a.toPgn())}};return{turn:m.turn,fen:m.fen,pgn:m.pgn,history:m.history,orientation:m.orientation,squareStyles:m.squareStyles,pendingMove:m.pendingMove,promotionModal:g,setBoardPosition:function(e){y(Object(s.a)(Object(s.a)({},m),{},{boardPosition:e}))},reset:function(){r.reset(),y(Object(s.a)(Object(s.a)({},m),{},{fen:V,boardPosition:A(V)}))},flip:function(){y(Object(s.a)(Object(s.a)({},m),{},{orientation:"white"===m.orientation?"black":"white"}))},onDrop:E,onMouseOverSquare:function(e){var t=r.moves({square:e,verbose:!0});if(0!==t.length){var n,i=[],o=Object(d.a)(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;i.push(a.to)}}catch(c){o.e(c)}finally{o.f()}console.log("SQUARESTOHIGHLIGHT: ",{moves:t,squaresToHighlight:i}),function(e,t){var n=[e].concat(Object(h.a)(t)).reduce((function(e,t){return Object(s.a)(Object(s.a)(Object(s.a)({},e),Object(v.a)({},t,{background:"radial-gradient(circle, rgb(123,97,255,0.5) 20%, transparent 0%)",borderRadius:"50%"})),R({history:m.history,pieceSquare:m.pieceSquare}))}),{});y((function(e){var t=e.squareStyles;return Object(s.a)(Object(s.a)({},m),{},{squareStyles:Object(s.a)(Object(s.a)({},t),n)})}))}(e,i)}},onMouseOutSquare:function(e){!function(){var e=Object.keys(m.boardPosition).find((function(e){return m.boardPosition[e]==="".concat(r.turn(),"K")}));y((function(t){var n=t.pieceSquare,i=t.history;return Object(s.a)(Object(s.a)({},m),{},{squareStyles:r.in_check()&&e?Object(v.a)({},e,m.squareStyles[e]):R({pieceSquare:n,history:i})})}))}()},onDragOverSquare:function(e){y(Object(s.a)(Object(s.a)({},m),{},{dropSquareStyle:"e4"===e||"d4"===e||"e5"===e||"d5"===e?{backgroundColor:"cornFlowerBlue"}:{boxShadow:"inset 0 0 1px 4px rgb(255, 255, 0)"}}))},onSquareClick:function(e){y((function(t){var n=t.history;return Object(s.a)(Object(s.a)({},m),{},{squareStyles:Object(s.a)(Object(s.a)({},m.squareStyles),R({pieceSquare:e,history:n})),pieceSquare:e})}));for(var n=r.move({from:m.pieceSquare,to:e}),i=r.moves({verbose:!0}),o=0,a=i.length;o<a;o++)if(i[o].flags.includes("p")&&i[o].from===m.pieceSquare)return y(Object(s.a)(Object(s.a)({},m),{},{pendingMove:{sourceSquare:m.pieceSquare,targetSquare:e}})),void O();null!==n&&(y(Object(s.a)(Object(s.a)({},m),{},{turn:r.turn(),fen:r.fen(),pgn:r.pgn(),history:r.history({verbose:!0}),pieceSquare:""})),t.updateBoard(n))},onSquareRightClick:function(e){return y(Object(s.a)(Object(s.a)({},m),{},{squareStyles:Object(v.a)({},e,{backgroundColor:"deepPink"})}))},undoMove:function(){var e=r.undo();e&&(console.log("ES6 MOVE UNDO: ",a.prev()),y(Object(s.a)(Object(s.a)({},m),{},{fen:r.fen(),undoMovesArray:[].concat(Object(h.a)(m.undoMovesArray),[e])})),t.undoMoveMsg([].concat(Object(h.a)(m.undoMovesArray),[e])))},redoMove:function(){if(0!==m.undoMovesArray.length){var e=m.undoMovesArray.pop();if(console.log("REDO: ",e),e){console.log("ES6 MOVE REDO: ",a.next());var n=r.move(e);console.log("REDONE: ",n),null!==n&&(y((function(e){var t=e.history,n=e.pieceSquare;return Object(s.a)(Object(s.a)({},m),{},{fen:r.fen(),pgn:r.pgn(),history:r.history({verbose:!0}),squareStyles:R({pieceSquare:n,history:t})})})),t.updateBoard(n))}}},promotion:function(e,t,n){var i=e,o=t;r.move({from:i,to:o,promotion:n}),a.makeMoveFromAlgebraic(i,o,n),y(Object(s.a)(Object(s.a)({},m),{},{fen:r.fen(),pendingMove:void 0})),f(!1)}}},B=n(28),q=n.n(B),F=n(48),W=n(49),D=n.n(W),U=n(50),G=n.n(U),Q={messageParser:function(e){return{text:(t=e,JSON.stringify(t)),messageType:"TEXT"};var t}},z=function(){var e=Object(i.useState)(null),t=Object(c.a)(e,2),n=t[0],r=t[1],o=D.a.createInstance("f4b36b6c897e41bfaa3904d75da40777"),a={uid:(Math.floor(9e4*Math.random())+1e4).toString(),token:""};Object(i.useEffect)((function(){(function(){var e=Object(F.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G.a.get("https://agoratokenserver-demo.herokuapp.com/access_token?channel=test&uid=".concat(a.uid)).then((function(e){var t;console.log(e),a.token=(null===(t=e.data)||void 0===t?void 0:t.token)||"",o.login(a).then((function(){console.log("Login successful");var e=o.createChannel("test");e.join(),r(e)}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){console.log("integrations successful")}))}),[]),Object(i.useEffect)((function(){n&&(null===n||void 0===n||n.on("MemberJoined",(function(e){console.log("New member joined: ",e)})),null===n||void 0===n||n.on("MemberLeft",(function(e){console.log("Member left: ",e)})))}),[n]);return{channel:n,playerMeta:a,sendChannelMessage:function(e,t){var i={uid:a.uid,json:e||{},type:t};console.log(Q.messageParser(i)),null===n||void 0===n||n.sendMessage(Q.messageParser(i)).then((function(){}))}}},$=function(e){var t=e.Agora;return{updateBoard:function(e){var n={move:e};null===t||void 0===t||t.sendChannelMessage(n,N)},updateBoardFen:function(e){var n={fen:e};null===t||void 0===t||t.sendChannelMessage(n,_)},updateBoardPgn:function(e){var n={pgn:e};null===t||void 0===t||t.sendChannelMessage(n,H)},undoMoveMsg:function(e){var n={undoArray:e};null===t||void 0===t||t.sendChannelMessage(n,T)},undoMove:function(e){var t=e.chess,n=e.state,i=e.setState,r=e.undoArray;t.undo()&&i(Object(s.a)(Object(s.a)({},n),{},{fen:t.fen(),undoMovesArray:r}))}}},J=n(31),Y="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Z="8/8/8/8/8/8/8/8",X=function(){var e=Object(i.useState)(new J(Y)),t=(Object(c.a)(e,1)[0],Object(i.useState)({fen:Y,orientation:"white",dropSquareStyle:{},squareStyles:{},pieceSquare:"",square:"",history:[],boardPosition:A(Y),pgn:[]})),n=Object(c.a)(t,2),r=n[0],o=n[1];Object(i.useEffect)((function(){console.log("BOARD_POSITION: ",M(r.boardPosition))}),[r.boardPosition]);return{fen:r.fen,pgn:r.pgn,boardPosition:r.boardPosition,orientation:r.orientation,onDrop:function(e){var t,n=e.sourceSquare,i=e.targetSquare,a=e.piece;console.log("EDITOR_ON_DROP: ",n,i,a),t="spare"===n?Object(s.a)(Object(s.a)({},r.boardPosition),{},Object(v.a)({},i,a)):Object(s.a)(Object(s.a)({},Object.fromEntries(Object.entries(r.boardPosition).filter((function(e){var t=Object(c.a)(e,2),i=t[0];t[1];return i!==n})))),{},Object(v.a)({},i,a)),console.log("BOARD_POSITION: ",t),o(Object(s.a)(Object(s.a)({},r),{},{fen:M(t)||r.fen,boardPosition:t}))},setBoardPosition:function(e){o(Object(s.a)(Object(s.a)({},r),{},{fen:M(e)||r.fen,boardPosition:e}))},setFenPosition:function(e){o(Object(s.a)(Object(s.a)({},r),{},{fen:e,boardPosition:A(e)}))},reset:function(){o(Object(s.a)(Object(s.a)({},r),{},{fen:Y,boardPosition:A(Y)}))},clear:function(){o(Object(s.a)(Object(s.a)({},r),{},{fen:Z,boardPosition:A(Z)}))},flip:function(){o(Object(s.a)(Object(s.a)({},r),{},{orientation:"white"===r.orientation?"black":"white"}))}}},ee=n(8),te=n(9),ne=Object(te.a)(y||(y=Object(ee.a)(["\n  background-color: #2b2b34;\n  width: 386px;\n  border-radius: 0px 16px 16px 0px;\n"]))),ie=te.b.div(O||(O=Object(ee.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  ","\n"])),(function(e){return e.editorMode&&ne})),re=te.b.div(S||(S=Object(ee.a)(["\n  div {\n    padding: 14px;\n    cursor: pointer;\n  }\n"]))),oe=te.b.div(E||(E=Object(ee.a)(["\n  div {\n    padding: 14px;\n    cursor: pointer;\n  }\n"]))),ae=te.b.div(j||(j=Object(ee.a)(["\n  position: relative;\n  /* width: 176px; */\n  /* height: 242px; */\n  background: #2b2b34;\n  border: 1.46px solid #424242;\n  box-sizing: border-box;\n  padding: 10px 0px;\n  .title {\n    display: flex;\n    margin-left: 10px;\n    img {\n      margin-right: 3px;\n    }\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 21px;\n    color: #ffffff;\n    margin-bottom: 11px;\n  }\n  .pgn-section {\n    width: 100%;\n    padding: 10px;\n    /* .error {\n      display: none;\n      height: 0px;\n    }\n    .outerBoard {\n      display: none;\n      height: 0px; \n    }*/\n    .moves {\n      color: white;\n      font-size: 10px;\n      move-number {}\n      move {\n        color: white;\n      }\n    }\n    .comment {\n      .commentRadio {\n        color: white;\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-start;\n        align-items: center;\n        margin: 5px 0px;\n          margin-right: 12px;\n        }\n      }\n    }\n  }\n"]))),se=te.b.div(k||(k=Object(ee.a)(["\n  position: relative;\n  /* bottom: -52px; */\n  bottom: -1px;\n  left: -1.46px;\n  /* width: 176px; */\n  height: 51px;\n  background: #2b2b34;\n  border: 1.46px solid #424242;\n  /* border-top: 0px; */\n  border-bottom: 0px;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  padding: 13.14px;\n  img {\n    cursor: pointer;\n  }\n"]))),ce=te.b.div(I||(I=Object(ee.a)(["\n  padding: 26px;\n  height: 100%;\n  .title {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 24px;\n    line-height: 29px;\n    color: #ffffff;\n  }\n  .divider {\n    width: 100%;\n    height: 0.5px;\n    background: #ffffff;\n    opacity: 0.1;\n    margin: 13.5px 0;\n    margin-bottom: 156px;\n  }\n  .slider {\n    width: 100%;\n    height: 32px;\n    background: #e8edf9;\n    border-radius: 10px;\n    display: flex;\n    /* margin-bottom: 156px; */\n    div {\n      width: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n  }\n  label {\n    margin-bottom: 8px;\n    font-weight: 500;\n    font-size: 13px;\n    line-height: 16px;\n    text-transform: uppercase;\n    color: #ffffff;\n    opacity: 0.4;\n  }\n  .input-fen {\n    display: flex;\n    width: 100%;\n    margin-bottom: 24px;\n    input {\n      width: 100%;\n      height: 32px;\n      border-radius: 8px;\n    }\n  }\n  .output-fen {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    height: 32px;\n    border-radius: 8px;\n    background: #ffffff;\n    overflow: hidden;\n    margin-bottom: 24px;\n    text-overflow: ellipsis;\n  }\n  .btn-panel {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    button {\n      width: 32%;\n      height: 40px;\n      color: #ffffff;\n      font-weight: 600;\n      font-size: 17px;\n      line-height: 20px;\n      background: #5656ff;\n      border: 1px solid rgba(255, 255, 255, 0.4);\n      box-sizing: border-box;\n      border-radius: 10px;\n    }\n  }\n"]))),ue=Object(te.a)(x||(x=Object(ee.a)(['\n  div[class$="-spare-pieces"] {\n    position: absolute;\n    width: 340px;\n    display: flex;\n    justify-content: space-between;\n    div[data-testid^="spare-"]:nth-child(odd) {\n      background: #b7c0d8;\n    }\n    div[data-testid^="spare-"]:nth-child(even) {\n      background: #e8edf9;\n    }\n    div {\n      /* width: 100%; */\n      margin: 2px;\n      border-radius: 12px;\n      div {\n        img {\n          padding: 8px 10px;\n          width: 26px !important;\n          height: 28px !important;\n        }\n      }\n    }\n  }\n']))),le=te.b.div(P||(P=Object(ee.a)(["\n  display: flex;\n  flex-direction: row;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #2b2b34;\n  padding: 10px;\n  border-radius: 12px;\n  z-index: 6;\n  div:nth-child(odd) {\n    background: #b7c0d8;\n  }\n  div:nth-child(even) {\n    background: #e8edf9;\n  }\n  div {\n    margin: 2px;\n    border-radius: 12px;\n    img {\n      cursor: pointer;\n      padding: 8px 10px;\n      width: 26px;\n      height: 28px;\n    }\n  }\n"]))),de=te.b.div(C||(C=Object(ee.a)(['\n  display: flex;\n  /* width: 1000px; */\n  /* height: fit-content; */\n  max-width: 1440px;\n  background: black;\n  grid-template-columns: 66% 37%;\n  grid-template-areas: "board sidePanel";\n  .board-container {\n    position: relative;\n    min-width: 500px;\n    min-height: 500px;\n    grid-area: board;\n    border: 10px solid rgba(255, 255, 255);\n    div {\n      ',"\n      .black-spare-pieces {\n        left: ",";\n        bottom: ",";\n\n        /* background:grey; */\n      }\n      .white-spare-pieces {\n        left: ",";\n        bottom: ",";\n        /* background:grey; */\n      }\n    }\n  }\n\n  "," {\n    grid-area: sidePanel;\n    /* width: 100%; */\n    /* height: 100%; */\n    ",", "," {\n      background: #2b2b34;\n      border: 2px solid rgba(255, 255, 255, 0.1);\n      border-radius: 0 8px 8px 0;\n    }\n  }\n"])),(function(e){return e.editorMode&&ue}),(function(e){return e.dimension?"".concat(e.dimension+32,"px"):"0px"}),(function(e){return e.dimension?"".concat(e.dimension-130,"px"):"0px"}),(function(e){return e.dimension?"".concat(e.dimension+32,"px"):"0px"}),(function(e){return e.dimension?"".concat(e.dimension-190,"px"):"0px"}),ie,re,oe),he=n.p+"static/media/undoMove.586eb02f.svg",ve=n.p+"static/media/redoMove.c6f42448.svg",ge=n.p+"static/media/history.8223d0ff.svg",fe=n.p+"static/media/resetBoard.7af0fcde.svg",be=n.p+"static/media/flipBoard.c1ef8478.svg",pe=n.p+"static/media/loadGame.28f8774a.svg",me=n.p+"static/media/wK.3b342df8.svg",ye=n.p+"static/media/wQ.785db365.svg",Oe=n.p+"static/media/wB.56f72474.svg",Se=n.p+"static/media/wR.33cf0258.svg",Ee=n.p+"static/media/wN.d5fa39eb.svg",je=n.p+"static/media/wP.5f74a9fe.svg",ke=n.p+"static/media/bK.e57316c7.svg",Ie=n.p+"static/media/bQ.c21470b8.svg",xe=n.p+"static/media/bB.1f023e3e.svg",Pe=n.p+"static/media/bR.2724e583.svg",Ce=n.p+"static/media/bN.a46c4723.svg",Me=n.p+"static/media/bP.d9262a65.svg",Ae=n.p+"static/media/arrowLeft.7e025148.svg",Ne=n.p+"static/media/arrowRight.ae8c68ee.svg",Te=n(21),_e=n(0),He=function(e){var t=e.pgn,n=e.mode,r={pgn:t,timerTime:"1",startPlay:null===t||void 0===t?void 0:t.split(/\d\./).join("").split(" ").filter((function(e){return""!==e})).length,showResult:!0,boardSize:"160",showFen:!1,showCoords:!1,figurine:!0,movesHeight:"78px"},o="board-0",a=function(e,t){var n,i=Object(d.a)(e);try{for(i.s();!(n=i.n()).done;){var r,a,s;if("childList"===n.value.type)null===(r=document.getElementById("".concat(o,"Buttonpgn")))||void 0===r||r.click(),console.log("PGNPRINT: ",null===(a=document.getElementById("textpgn".concat(o,"Button")))||void 0===a?void 0:a.innerHTML),null===(s=document.getElementById("".concat(o,"Buttonpgn")))||void 0===s||s.click()}}catch(c){i.e(c)}finally{i.f()}};return Object(i.useEffect)((function(){var e;console.log("PGNPRINTBUTTON: ",null===(e=document.getElementById("".concat(o,"Buttonpgn")))||void 0===e?void 0:e.click());var t=document.getElementById("".concat(o,"Moves")),n=new MutationObserver(a);t&&n.observe(t,{attributes:!0,childList:!0,subtree:!0})}),[document.getElementById("".concat(o,"Buttonpgn"))]),Object(i.useEffect)((function(){var e,t;console.log("PGNPRINT: ",null===(e=document.getElementById("textpgn".concat(o,"Button")))||void 0===e?void 0:e.innerHTML,null===(t=document.getElementById("".concat(o,"Buttonpgn")))||void 0===t?void 0:t.click())}),[document.getElementById("textpgn".concat(o,"Button"))]),Object(i.useLayoutEffect)((function(){switch(n){case"view":Object(Te.pgnView)(o,r);break;case"edit":Object(Te.pgnEdit)(o,r);break;case"print":Object(Te.pgnPrint)(o,r)}})),Object(_e.jsx)("div",{id:o})},Le=function(e,t){return e.pgn===t.pgn},we=r.a.memo(He,Le),Ve=function(e){var t=e.undoMove,n=e.redoMove,i=e.flip,r=e.reset,o=e.setSidePanelSection;return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)(re,{children:[Object(_e.jsx)("div",{onClick:t,children:Object(_e.jsx)("img",{src:he,alt:"Undo"})}),Object(_e.jsx)("div",{onClick:n,children:Object(_e.jsx)("img",{src:ve,alt:"Redo"})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:ge,alt:"History",onClick:function(){o("history")}})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:fe,alt:"Reset",onClick:r})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:be,alt:"Flip",onClick:i})})]}),Object(_e.jsx)(oe,{children:Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:pe,alt:"Load"})})})]})},Re=function(e){var t,n,r=Object(i.useState)(),o=Object(c.a)(r,2),a=o[0],u=o[1],d=Object(i.useState)("true"===Object.fromEntries(new URLSearchParams(window.location.search).entries()).editorMode||!1),h=Object(c.a)(d,2),v=h[0],g=(h[1],Object(i.useState)("menu")),f=Object(c.a)(g,2),b=f[0],p=f[1],m=z(),y=$({Agora:m}),O=X(),S=K(m,y),E=S.turn,j=S.setBoardPosition,k=S.reset,I=S.flip,x=S.orientation,P=S.pendingMove,C=S.fen,M=S.pgn,A=(S.history,S.promotionModal),N=S.onDrop,T=S.onMouseOverSquare,_=S.onMouseOutSquare,H=S.squareStyles,L=S.onDragOverSquare,w=S.onSquareClick,V=S.onSquareRightClick,R=S.undoMove,B=S.redoMove,q=S.promotion;Object(i.useEffect)((function(){return F(),window.addEventListener("resize",F),function(){return window.removeEventListener("resize",F)}}),[]),Object(i.useEffect)((function(){var e,i=null===(e=window.document.getElementById("board-container"))||void 0===e?void 0:e.querySelector("div");t=null===i||void 0===i?void 0:i.firstElementChild,n=null===i||void 0===i?void 0:i.lastElementChild,t&&n&&(t.classList.add("black-spare-pieces"),n.classList.add("white-spare-pieces"),t.setAttribute("style",""),n.setAttribute("style",""))}),[window.document.getElementById("board-container")]);var F=function(){var e;u(null===(e=window.document.getElementById("board-container"))||void 0===e?void 0:e.clientWidth)},W={wK:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:me,alt:"wK"})},wQ:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:ye,alt:"wQ"})},wB:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:Oe,alt:"wB"})},wR:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:Se,alt:"wR"})},wN:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:Ee,alt:"wN"})},wP:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:je,alt:"wP"})},bK:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:ke,alt:"bK"})},bQ:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:Ie,alt:"bQ"})},bB:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:xe,alt:"bB"})},bR:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:Pe,alt:"bR"})},bN:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:Ce,alt:"bN"})},bP:function(e){var t=e.squareWidth;e.isDragging;return Object(_e.jsx)("img",{style:{width:t,height:t},src:Me,alt:"bP"})}},D=Object(s.a)(Object(s.a)(Object(s.a)({id:"board-0",position:v?O.boardPosition:C,dropOffBoard:v?"trash":"snapback",draggable:!0,lightSquareStyle:{backgroundColor:"#E8EDF9"},darkSquareStyle:{backgroundColor:"#B7C0D8"},pieces:W,boardStyle:{width:a,height:a,position:"relative"},width:a,getPosition:v?O.setBoardPosition:j},v?{onDrop:O.onDrop}:{onDrop:N}),{},{orientation:v?O.orientation:x||"white"},!v&&{onMouseOverSquare:T,onMouseOutSquare:_,squareStyles:H,onDragOverSquare:L,onSquareClick:w,onSquareRightClick:V}),{},{sparePieces:v}),U=Object(_e.jsxs)(le,{children:[Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:"w"===E?ye:Ie,alt:"",width:a&&a/8,height:a&&a/8,onClick:function(){P&&q(P.sourceSquare,P.targetSquare,"q")}})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:"w"===E?Oe:xe,alt:"",width:a&&a/8,height:a&&a/8,onClick:function(){P&&q(P.sourceSquare,P.targetSquare,"b")}})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:"w"===E?Se:Pe,alt:"",width:a&&a/8,height:a&&a/8,onClick:function(){P&&q(P.sourceSquare,P.targetSquare,"r")}})}),Object(_e.jsx)("div",{children:Object(_e.jsx)("img",{src:"w"===E?Ee:Ce,alt:"",width:a&&a/8,height:a&&a/8,onClick:function(){P&&q(P.sourceSquare,P.targetSquare,"n")}})})]});return Object(_e.jsxs)(de,{dimension:a,editorMode:v,children:[Object(_e.jsxs)("div",{id:"board-container",className:"board-container",children:[A&&U,Object(_e.jsx)(l.a,Object(s.a)({},D))]}),Object(_e.jsx)(ie,{editorMode:v,children:v?Object(_e.jsxs)(ce,{children:[Object(_e.jsx)("div",{className:"title",children:"Board Settings"}),Object(_e.jsx)("div",{className:"divider"}),Object(_e.jsx)("label",{htmlFor:"inputFen",children:"Fen"}),Object(_e.jsx)("div",{className:"input-fen",children:Object(_e.jsx)("input",{name:"inputFen",type:"text",value:null===O||void 0===O?void 0:O.fen,onChange:function(e){O.setFenPosition(e.target.value)}})}),Object(_e.jsxs)("div",{className:"btn-panel",children:[Object(_e.jsx)("button",{onClick:O.reset,children:"Reset"}),Object(_e.jsx)("button",{onClick:O.clear,children:"Clear"}),Object(_e.jsx)("button",{onClick:null===O||void 0===O?void 0:O.flip,children:"Flip"})]})]}):Object(_e.jsx)(_e.Fragment,{children:function(){switch(b){case"menu":return Object(_e.jsx)(Ve,{undoMove:R,redoMove:B,reset:k,flip:I,setSidePanelSection:p});case"history":return Object(_e.jsxs)(ae,{children:[Object(_e.jsxs)("div",{className:"title",children:[Object(_e.jsx)("img",{src:ge,alt:""}),"History"]}),Object(_e.jsx)("div",{className:"pgn-section",children:M&&Object(_e.jsx)(we,{pgn:M,mode:"edit"})}),Object(_e.jsxs)(se,{children:[Object(_e.jsx)("img",{src:Ae,alt:"",onClick:function(){p("menu")}}),Object(_e.jsx)("img",{src:Ne,alt:""})]})]});default:return Object(_e.jsx)(Ve,{undoMove:R,redoMove:B,reset:k,flip:I,setSidePanelSection:p})}}()})})]})};var Ke=function(){return Object(_e.jsx)("div",{className:"app",children:Object(_e.jsx)(Re,{})})},Be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),o(e),a(e)}))};a.a.render(Object(_e.jsx)(r.a.StrictMode,{children:Object(_e.jsx)(Ke,{})}),document.getElementById("root")),Be()}},[[94,1,2]]]);
//# sourceMappingURL=main.a505b9c0.chunk.js.map